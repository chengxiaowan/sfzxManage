"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function a(a){this.itemsCount=a.itemsCount,this.pageSize=a.pageSize,this.displayPage=a.displayPage<5?5:a.displayPage,this.pages=Math.ceil(a.itemsCount/a.pageSize)||1,t.isNumeric(a.pages)&&(this.pages=a.pages),this.currentPage=a.currentPage,this.styleClass=a.styleClass,this.onSelect=a.onSelect,this.showCtrl=a.showCtrl,this.remote=a.remote,this.displayInfoType="itemsCount"==a.displayInfoType&&a.itemsCount?"itemsCount":"pages"}a.prototype={_draw:function(){for(var t='<form onsubmit="return false;" class="sui-pagination form form-inline',a=0;a<this.styleClass.length;a++)t+=" "+this.styleClass[a];t+='"></form>',this.hookNode.html(t),this._drawInner()},_drawInner:function(){var t=this.hookNode.children(".sui-pagination"),a='<ul class="pagination pull-left" style="margin:0"><li class="prev'+(this.currentPage-1<=0?" disabled":" ")+'"><a href="#" data="'+(this.currentPage-1)+'">«上一页</a></li>';if(this.pages<=this.displayPage||this.pages==this.displayPage+1)for(var i=1;i<this.pages+1;i++)i==this.currentPage?a+='<li class="active"><a href="#" data="'+i+'">'+i+"</a></li>":a+='<li><a href="#" data="'+i+'">'+i+"</a></li>";else if(this.currentPage<this.displayPage-1){for(var i=1;i<this.displayPage;i++)i==this.currentPage?a+='<li class="active"><a href="#" data="'+i+'">'+i+"</a></li>":a+='<li><a href="#" data="'+i+'">'+i+"</a></li>";a+='<li class="dotted"><span>...</span></li>',a+='<li><a href="#" data="'+this.pages+'">'+this.pages+"</a></li>"}else if(this.currentPage>this.pages-this.displayPage+2&&this.currentPage<=this.pages){a+='<li><a href="#" data="1">1</a></li>',a+='<li class="dotted"><span>...</span></li>';for(var i=this.pages-this.displayPage+2;i<=this.pages;i++)i==this.currentPage?a+='<li class="active"><a href="#" data="'+i+'">'+i+"</a></li>":a+='<li><a href="#" data="'+i+'">'+i+"</a></li>"}else{a+='<li><a href="#" data="1">1</a></li>',a+='<li class="dotted"><span>...</span></li>';var s,e,n=(this.displayPage-3)/2;(this.displayPage-3)%2==0?s=e=n:(s=Math.floor(n),e=Math.ceil(n));for(var i=this.currentPage-s;i<=this.currentPage+e;i++)i==this.currentPage?a+='<li class="active"><a href="#" data="'+i+'">'+i+"</a></li>":a+='<li><a href="#" data="'+i+'">'+i+"</a></li>";a+='<li class="dotted"><span>...</span></li>',a+='<li><a href="#" data="'+this.pages+'">'+this.pages+"</a></li>"}a+='<li class="next'+(this.currentPage+1>this.pages?" disabled":" ")+'"><a href="#" data="'+(this.currentPage+1)+'">下一页»</a></li></ul>',this.showCtrl&&(a+=this._drawCtrl()),t.html(a)},_drawCtrl:function(){return'<div class="pull-left form-group form-group-sm">&nbsp;'+("itemsCount"==this.displayInfoType?"<span>共"+this.itemsCount+"条</span>&nbsp;":"<span>共"+this.pages+"页</span>&nbsp;")+'<span>&nbsp;到&nbsp;<input type="text" style="display:inline-block;width:70px" class="page-num form-control"/><button class="page-confirm btn btn-white btn-sm">确定</button>&nbsp;页</span></div>'},_ctrl:function(){function a(){var a=parseInt(s.find(".page-num").val());t.isNumeric(a)&&a<=i.pages&&a>0&&(i.remote||(i.currentPage=a,i._drawInner()),t.isFunction(i.onSelect)&&i.onSelect.call(t(this),a))}var i=this,s=i.hookNode.children(".sui-pagination");s.on("click",".page-confirm",function(t){a.call(this)}),s.on("keypress",".page-num",function(t){13==t.which&&a.call(this)})},_select:function(){var a=this;a.hookNode.children(".sui-pagination").on("click","a",function(i){i.preventDefault();var s=parseInt(t(this).attr("data"));t(this).parent().hasClass("disabled")||t(this).parent().hasClass("active")||(a.remote||(a.currentPage=s,a._drawInner()),t.isFunction(a.onSelect)&&a.onSelect.call(t(this),s))})},init:function(t,a){return this.hookNode=a,this._draw(),this._select(),this.showCtrl&&this._ctrl(),this},updateItemsCount:function(a,i){t.isNumeric(a)&&(this.pages=Math.ceil(a/this.pageSize)),this.currentPage=this.currentPage>this.pages?this.pages:this.currentPage,t.isNumeric(i)&&(this.currentPage=i),this._drawInner()},updatePages:function(a,i){t.isNumeric(a)&&(this.pages=a),this.currentPage=this.currentPage>this.pages?this.pages:this.currentPage,t.isNumeric(i)&&(this.currentPage=i),this._drawInner()},goToPage:function(a){t.isNumeric(a)&&a<=this.pages&&a>0&&(this.currentPage=a,this._drawInner())}};var i=t.fn.pagination;t.fn.pagination=function(i){var s=t.extend({},t.fn.pagination.defaults,"object"==(void 0===i?"undefined":_typeof(i))&&i);"string"==typeof i&&(args=t.makeArray(arguments),args.shift());var e=t(this),n=e.data("sui-pagination");return n?"string"==typeof i&&n[i].apply(n,args):e.data("sui-pagination",n=new a(s).init(s,t(this))),n},t.fn.pagination.Constructor=a,t.fn.pagination.noConflict=function(){return t.fn.pagination=i,this},t.fn.pagination.defaults={pageSize:10,displayPage:5,currentPage:1,itemsCount:0,styleClass:[],pages:null,showCtrl:!1,onSelect:null,remote:!1}}(window.jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZV9wYWdpbmF0aW9uX2Jhay5qcyJdLCJuYW1lcyI6WyIkIiwiUGFnaW5hdGlvbiIsIm9wdHMiLCJ0aGlzIiwiaXRlbXNDb3VudCIsInBhZ2VTaXplIiwiZGlzcGxheVBhZ2UiLCJpc051bWVyaWMiLCJwYWdlcyIsInN0eWxlQ2xhc3MiLCJNYXRoIiwiY2VpbCIsImN1cnJlbnRQYWdlIiwiZGlzcGxheUluZm9UeXBlIiwiX2RyYXciLCJwcm90b3R5cGUiLCJ0cGwiLCJpIiwibGVuZ3RoIiwiaG9va05vZGUiLCJodG1sIiwiX2RyYXdJbm5lciIsIm91dGVyIiwiY2hpbGRyZW4iLCJmcm9udFBhZ2UiLCJiYWNrUGFnZSIsIm1pZGRsZSIsImZsb29yIiwic2hvd0N0cmwiLCJfZHJhd0N0cmwiLCJfY3RybCIsInBhZyIsInRtcE51bSIsInBhcnNlSW50IiwiZmluZCIsInZhbCIsImRvUGFnaW5hdGlvbiIsInNlbGYiLCJvblNlbGVjdCIsImNhbGwiLCJvbiIsImUiLCJ3aGljaCIsIl9zZWxlY3QiLCJhdHRyIiwicHJldmVudERlZmF1bHQiLCJoYXNDbGFzcyIsInBhcmVudCIsImluaXQiLCJ1cGRhdGVJdGVtc0NvdW50IiwicGFnZVRvR28iLCJ1cGRhdGVQYWdlcyIsImdvVG9QYWdlIiwicGFnZSIsIm9sZCIsImZuIiwicGFnaW5hdGlvbiIsIm9wdGlvbnMiLCJleHRlbmQiLCJkZWZhdWx0cyIsIl90eXBlb2YiLCJhcmd1bWVudHMiLCJhcmdzIiwic2hpZnQiLCIkdGhpcyIsImRhdGEiLCJhcHBseSIsIkNvbnN0cnVjdG9yIiwibm9Db25mbGljdCIsIndpbmRvdyIsImpRdWVyeSJdLCJtYXBwaW5ncyI6Im9PQUFDLFNBQVVBLEdBQ1AsUUFBU0MsR0FBV0MsR0FDaEJDLEtBQUtDLFdBQWFGLEVBQUtFLFdBQ3ZCRCxLQUFLRSxTQUFXSCxFQUFLRyxTQUg1QkYsS0FBQUcsWUFBYUosRUFBQUksWUFBQSxFQUFBLEVBQUFKLEVBQUFJLFlBRU5ILEtBQUtDLE1B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dUQsR0FBR0MsV0FBV1csWUFBY2xFLEVBRTlCRCxFQUFFdUQsR0FBR0MsV0FBV1ksV0FBYSxXQUN6QnBFLE1BREpBLEdBQUt3RCxHQUFBQSxXQUFXWSxFQUNQWixNQUlUeEQsRUFBRXVELEdBQUdDLFdBQVdHLFVBQWhCdEQsU0FBS21ELEdBQ0RuRCxZQUR1QixFQUV2QkMsWUFBYSxFQUNiTSxXQUFBQSxFQUNBUixjQUNBSyxNQUFBQSxLQUNBRCxVQUFPLEVBQ1BvQixTQUFVLEtBQ1ZVLFFBQUFBLElBSU4rQixPQUFPQyIsImZpbGUiOiJtb2R1bGVfcGFnaW5hdGlvbl9iYWsuanMiLCJzb3VyY2VzQ29udGVudCI6WyIhZnVuY3Rpb24gKCQpIHtcbiAgICBmdW5jdGlvbiBQYWdpbmF0aW9uKG9wdHMpIHtcbiAgICAgICAgdGhpcy5pdGVtc0NvdW50ID0gb3B0cy5pdGVtc0NvdW50O1xuICAgICAgICB0aGlzLnBhZ2VTaXplID0gb3B0cy5wYWdlU2l6ZTtcbiAgICAgICAgdGhpcy5kaXNwbGF5UGFnZSA9IG9wdHMuZGlzcGxheVBhZ2UgPCA1ID8gNSA6IG9wdHMuZGlzcGxheVBhZ2U7XG4gICAgICAgIC8vaXRlbXNDb3VudOS4ujDnmoTml7blgJnlupTkuLox6aG1XG4gICAgICAgIHRoaXMucGFnZXMgPSBNYXRoLmNlaWwob3B0cy5pdGVtc0NvdW50IC8gb3B0cy5wYWdlU2l6ZSkgfHwgMTsgXG4gICAgICAgICQuaXNOdW1lcmljKG9wdHMucGFnZXMpICYmICh0aGlzLnBhZ2VzID0gb3B0cy5wYWdlcyk7XG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBvcHRzLmN1cnJlbnRQYWdlO1xuICAgICAgICB0aGlzLnN0eWxlQ2xhc3MgPSBvcHRzLnN0eWxlQ2xhc3M7XG4gICAgICAgIHRoaXMub25TZWxlY3QgPSBvcHRzLm9uU2VsZWN0O1xuICAgICAgICB0aGlzLnNob3dDdHJsID0gb3B0cy5zaG93Q3RybDtcbiAgICAgICAgdGhpcy5yZW1vdGUgPSBvcHRzLnJlbW90ZTtcbiAgICAgICAgdGhpcy5kaXNwbGF5SW5mb1R5cGUgPSAoKG9wdHMuZGlzcGxheUluZm9UeXBlID09ICdpdGVtc0NvdW50JyAmJiBvcHRzLml0ZW1zQ291bnQpID8gJ2l0ZW1zQ291bnQnOiAncGFnZXMnKTtcbiAgICB9XG5cbiAgICAvKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG4gICAgUGFnaW5hdGlvbi5wcm90b3R5cGUgPSB7XG4gICAgICAgIC8vZ2VuZXJhdGUgdGhlIG91dGVyIHdyYXBwZXIgd2l0aCB0aGUgY29uZmlnIG9mIGN1c3RvbSBzdHlsZVxuICAgICAgICBfZHJhdzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRwbCA9ICc8Zm9ybSBvbnN1Ym1pdD1cInJldHVybiBmYWxzZTtcIiBjbGFzcz1cInN1aS1wYWdpbmF0aW9uIGZvcm0gZm9ybS1pbmxpbmUnO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0eWxlQ2xhc3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0cGwgKz0gJyAnICsgdGhpcy5zdHlsZUNsYXNzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHBsICs9ICdcIj48L2Zvcm0+J1xuICAgICAgICAgICAgdGhpcy5ob29rTm9kZS5odG1sKHRwbCk7XG4gICAgICAgICAgICB0aGlzLl9kcmF3SW5uZXIoKTtcbiAgICAgICAgfSxcbiAgICAgICAgLy9nZW5lcmF0ZSB0aGUgdHJ1ZSBwYWdpbmF0aW9uXG4gICAgICAgIF9kcmF3SW5uZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBvdXRlciA9IHRoaXMuaG9va05vZGUuY2hpbGRyZW4oJy5zdWktcGFnaW5hdGlvbicpO1xuICAgICAgICAgICAgdmFyIHRwbCA9ICc8dWwgY2xhc3M9XCJwYWdpbmF0aW9uIHB1bGwtbGVmdFwiIHN0eWxlPVwibWFyZ2luOjBcIj4nICsgJzxsaSBjbGFzcz1cInByZXYnICsgKHRoaXMuY3VycmVudFBhZ2UgLSAxIDw9IDAgPyAnIGRpc2FibGVkJyA6ICcgJykgKyAnXCI+PGEgaHJlZj1cIiNcIiBkYXRhPVwiJyArICh0aGlzLmN1cnJlbnRQYWdlIC0gMSkgKyAnXCI+wqvkuIrkuIDpobU8L2E+PC9saT4nO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFnZXMgPD0gdGhpcy5kaXNwbGF5UGFnZSB8fCB0aGlzLnBhZ2VzID09IHRoaXMuZGlzcGxheVBhZ2UgKyAxKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB0aGlzLnBhZ2VzICsgMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGkgPT0gdGhpcy5jdXJyZW50UGFnZSA/ICh0cGwgKz0gJzxsaSBjbGFzcz1cImFjdGl2ZVwiPjxhIGhyZWY9XCIjXCIgZGF0YT1cIicgKyBpICsgJ1wiPicgKyBpICsgJzwvYT48L2xpPicpIDogKHRwbCArPSAnPGxpPjxhIGhyZWY9XCIjXCIgZGF0YT1cIicgKyBpICsgJ1wiPicgKyBpICsgJzwvYT48L2xpPicpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSA8IHRoaXMuZGlzcGxheVBhZ2UgLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgdGhpcy5kaXNwbGF5UGFnZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpID09IHRoaXMuY3VycmVudFBhZ2UgPyAodHBsICs9ICc8bGkgY2xhc3M9XCJhY3RpdmVcIj48YSBocmVmPVwiI1wiIGRhdGE9XCInICsgaSArICdcIj4nICsgaSArICc8L2E+PC9saT4nKSA6ICh0cGwgKz0gJzxsaT48YSBocmVmPVwiI1wiIGRhdGE9XCInICsgaSArICdcIj4nICsgaSArICc8L2E+PC9saT4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cGwgKz0gJzxsaSBjbGFzcz1cImRvdHRlZFwiPjxzcGFuPi4uLjwvc3Bhbj48L2xpPic7XG4gICAgICAgICAgICAgICAgICAgIHRwbCArPSAnPGxpPjxhIGhyZWY9XCIjXCIgZGF0YT1cIicgKyB0aGlzLnBhZ2VzICsgJ1wiPicgKyB0aGlzLnBhZ2VzICsgJzwvYT48L2xpPic7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnRQYWdlID4gdGhpcy5wYWdlcyAtIHRoaXMuZGlzcGxheVBhZ2UgKyAyICYmIHRoaXMuY3VycmVudFBhZ2UgPD0gdGhpcy5wYWdlcykge1xuICAgICAgICAgICAgICAgICAgICB0cGwgKz0gJzxsaT48YSBocmVmPVwiI1wiIGRhdGE9XCIxXCI+MTwvYT48L2xpPic7XG4gICAgICAgICAgICAgICAgICAgIHRwbCArPSAnPGxpIGNsYXNzPVwiZG90dGVkXCI+PHNwYW4+Li4uPC9zcGFuPjwvbGk+JztcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMucGFnZXMgLSB0aGlzLmRpc3BsYXlQYWdlICsgMjsgaSA8PSB0aGlzLnBhZ2VzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPT0gdGhpcy5jdXJyZW50UGFnZSA/ICh0cGwgKz0gJzxsaSBjbGFzcz1cImFjdGl2ZVwiPjxhIGhyZWY9XCIjXCIgZGF0YT1cIicgKyBpICsgJ1wiPicgKyBpICsgJzwvYT48L2xpPicpIDogKHRwbCArPSAnPGxpPjxhIGhyZWY9XCIjXCIgZGF0YT1cIicgKyBpICsgJ1wiPicgKyBpICsgJzwvYT48L2xpPicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdHBsICs9ICc8bGk+PGEgaHJlZj1cIiNcIiBkYXRhPVwiMVwiPjE8L2E+PC9saT4nO1xuICAgICAgICAgICAgICAgICAgICB0cGwgKz0gJzxsaSBjbGFzcz1cImRvdHRlZFwiPjxzcGFuPi4uLjwvc3Bhbj48L2xpPic7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmcm9udFBhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pZGRsZSA9ICh0aGlzLmRpc3BsYXlQYWdlIC0gMykgLyAyO1xuICAgICAgICAgICAgICAgICAgICBpZiAoICh0aGlzLmRpc3BsYXlQYWdlIC0gMykgJSAyID09IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9udFBhZ2UgPSBiYWNrUGFnZSA9IG1pZGRsZTsgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9udFBhZ2UgPSBNYXRoLmZsb29yKG1pZGRsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrUGFnZSA9IE1hdGguY2VpbChtaWRkbGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSB0aGlzLmN1cnJlbnRQYWdlIC0gZnJvbnRQYWdlOyBpIDw9IHRoaXMuY3VycmVudFBhZ2UgKyBiYWNrUGFnZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpID09IHRoaXMuY3VycmVudFBhZ2UgPyAodHBsICs9ICc8bGkgY2xhc3M9XCJhY3RpdmVcIj48YSBocmVmPVwiI1wiIGRhdGE9XCInICsgaSArICdcIj4nICsgaSArICc8L2E+PC9saT4nKSA6ICh0cGwgKz0gJzxsaT48YSBocmVmPVwiI1wiIGRhdGE9XCInICsgaSArICdcIj4nICsgaSArICc8L2E+PC9saT4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cGwgKz0gJzxsaSBjbGFzcz1cImRvdHRlZFwiPjxzcGFuPi4uLjwvc3Bhbj48L2xpPic7XG4gICAgICAgICAgICAgICAgICAgIHRwbCArPSAnPGxpPjxhIGhyZWY9XCIjXCIgZGF0YT1cIicgKyB0aGlzLnBhZ2VzICsgJ1wiPicgKyB0aGlzLnBhZ2VzICsgJzwvYT48L2xpPic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHBsICs9ICc8bGkgY2xhc3M9XCJuZXh0JyArICh0aGlzLmN1cnJlbnRQYWdlICsgMSA+IHRoaXMucGFnZXMgPyAnIGRpc2FibGVkJyA6ICcgJykgKyAnXCI+PGEgaHJlZj1cIiNcIiBkYXRhPVwiJyArICh0aGlzLmN1cnJlbnRQYWdlICsgMSkgKyAnXCI+5LiL5LiA6aG1wrs8L2E+PC9saT4nICsgJzwvdWw+JztcbiAgICAgICAgICAgIHRoaXMuc2hvd0N0cmwgJiYgKHRwbCArPSB0aGlzLl9kcmF3Q3RybCgpKTtcbiAgICAgICAgICAgIG91dGVyLmh0bWwodHBsKTtcbiAgICAgICAgfSxcbiAgICAgICAgLy/lgLzkvKDpgJJcbiAgICAgICAgX2RyYXdDdHJsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdHBsID0gJzxkaXYgY2xhc3M9XCJwdWxsLWxlZnQgZm9ybS1ncm91cCBmb3JtLWdyb3VwLXNtXCI+Jm5ic3A7JyArICh0aGlzLmRpc3BsYXlJbmZvVHlwZSA9PSAnaXRlbXNDb3VudCc/ICc8c3Bhbj7lhbEnICsgdGhpcy5pdGVtc0NvdW50ICsgJ+adoTwvc3Bhbj4mbmJzcDsnIDonPHNwYW4+5YWxJyArIHRoaXMucGFnZXMgKyAn6aG1PC9zcGFuPiZuYnNwOycpICsgXG4gICAgICAgICAgICAnPHNwYW4+JyArICcmbmJzcDvliLAmbmJzcDsnICsgJzxpbnB1dCB0eXBlPVwidGV4dFwiIHN0eWxlPVwiZGlzcGxheTppbmxpbmUtYmxvY2s7d2lkdGg6NzBweFwiIGNsYXNzPVwicGFnZS1udW0gZm9ybS1jb250cm9sXCIvPjxidXR0b24gY2xhc3M9XCJwYWdlLWNvbmZpcm0gYnRuIGJ0bi13aGl0ZSBidG4tc21cIj7noa7lrpo8L2J1dHRvbj4nICsgJyZuYnNwO+mhtScgKyAnPC9zcGFuPicgKyAnPC9kaXY+JztcbiAgICAgICAgICAgIHJldHVybiB0cGw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgX2N0cmw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgICAgICAgICBwYWcgPSBzZWxmLmhvb2tOb2RlLmNoaWxkcmVuKCcuc3VpLXBhZ2luYXRpb24nKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gZG9QYWdpbmF0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB0bXBOdW0gPSBwYXJzZUludChwYWcuZmluZCgnLnBhZ2UtbnVtJykudmFsKCkpO1xuICAgICAgICAgICAgICAgIGlmICgkLmlzTnVtZXJpYyh0bXBOdW0pICYmIHRtcE51bSA8PSBzZWxmLnBhZ2VzICYmIHRtcE51bSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxmLnJlbW90ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50UGFnZSA9IHRtcE51bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RyYXdJbm5lcigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24oc2VsZi5vblNlbGVjdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub25TZWxlY3QuY2FsbCgkKHRoaXMpLCB0bXBOdW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFnLm9uKCdjbGljaycsICcucGFnZS1jb25maXJtJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBkb1BhZ2luYXRpb24uY2FsbCh0aGlzKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHBhZy5vbigna2V5cHJlc3MnLCAnLnBhZ2UtbnVtJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBlLndoaWNoID09IDEzICYmIGRvUGFnaW5hdGlvbi5jYWxsKHRoaXMpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LFxuXG4gICAgICAgIF9zZWxlY3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHNlbGYuaG9va05vZGUuY2hpbGRyZW4oJy5zdWktcGFnaW5hdGlvbicpLm9uKCdjbGljaycsICdhJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdmFyIHRtcE51bSA9IHBhcnNlSW50KCQodGhpcykuYXR0cignZGF0YScpKTtcbiAgICAgICAgICAgICAgICBpZiAoISQodGhpcykucGFyZW50KCkuaGFzQ2xhc3MoJ2Rpc2FibGVkJykgJiYgISQodGhpcykucGFyZW50KCkuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VsZi5yZW1vdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFBhZ2UgPSB0bXBOdW07XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9kcmF3SW5uZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoJC5pc0Z1bmN0aW9uKHNlbGYub25TZWxlY3QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uU2VsZWN0LmNhbGwoJCh0aGlzKSwgdG1wTnVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKG9wdHMsIGhvb2tOb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmhvb2tOb2RlID0gaG9va05vZGU7XG4gICAgICAgICAgICB0aGlzLl9kcmF3KCk7XG4gICAgICAgICAgICB0aGlzLl9zZWxlY3QoKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0N0cmwgJiYgdGhpcy5fY3RybCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlSXRlbXNDb3VudDogZnVuY3Rpb24gKGl0ZW1zQ291bnQsIHBhZ2VUb0dvKSB7XG4gICAgICAgICAgICAkLmlzTnVtZXJpYyhpdGVtc0NvdW50KSAmJiAodGhpcy5wYWdlcyA9IE1hdGguY2VpbChpdGVtc0NvdW50IC8gdGhpcy5wYWdlU2l6ZSkpO1xuICAgICAgICAgICAgLy/lpoLmnpzmnIDlkI7kuIDpobXmsqHmnInmlbDmja7kuobvvIzov5Tlm57liLDliankvZnmnIDlpKfpobXmlbBcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSB0aGlzLmN1cnJlbnRQYWdlID4gdGhpcy5wYWdlcyA/IHRoaXMucGFnZXMgOiB0aGlzLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgJC5pc051bWVyaWMocGFnZVRvR28pICYmICh0aGlzLmN1cnJlbnRQYWdlID0gcGFnZVRvR28pO1xuICAgICAgICAgICAgdGhpcy5fZHJhd0lubmVyKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlUGFnZXM6IGZ1bmN0aW9uIChwYWdlcywgcGFnZVRvR28pIHtcbiAgICAgICAgICAgICQuaXNOdW1lcmljKHBhZ2VzKSAmJiAodGhpcy5wYWdlcyA9IHBhZ2VzKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSB0aGlzLmN1cnJlbnRQYWdlID4gdGhpcy5wYWdlcyA/IHRoaXMucGFnZXMgOiB0aGlzLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgJC5pc051bWVyaWMocGFnZVRvR28pICYmICh0aGlzLmN1cnJlbnRQYWdlID0gcGFnZVRvR28pO1xuICAgICAgICAgICAgdGhpcy5fZHJhd0lubmVyKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ29Ub1BhZ2U6IGZ1bmN0aW9uIChwYWdlKSB7XG4gICAgICAgICAgICBpZiAoJC5pc051bWVyaWMocGFnZSkgJiYgcGFnZSA8PSB0aGlzLnBhZ2VzICYmIHBhZ2UgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHBhZ2U7XG4gICAgICAgICAgICAgICAgdGhpcy5fZHJhd0lubmVyKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuXG4gICAgdmFyIG9sZCA9ICQuZm4ucGFnaW5hdGlvbjtcbiAgICBcbiAgICAkLmZuLnBhZ2luYXRpb24gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHt9LCAkLmZuLnBhZ2luYXRpb24uZGVmYXVsdHMsIHR5cGVvZiBvcHRpb25zID09ICdvYmplY3QnICYmIG9wdGlvbnMpO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGFyZ3MgPSAkLm1ha2VBcnJheShhcmd1bWVudHMpO1xuICAgICAgICAgICAgYXJncy5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgIHBhZyA9ICR0aGlzLmRhdGEoJ3N1aS1wYWdpbmF0aW9uJyk7XG4gICAgICAgIGlmICghcGFnKSAkdGhpcy5kYXRhKCdzdWktcGFnaW5hdGlvbicsIChwYWcgPSBuZXcgUGFnaW5hdGlvbihvcHRzKS5pbml0KG9wdHMsICQodGhpcykpKSlcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcGFnW29wdGlvbnNdLmFwcGx5KHBhZywgYXJncylcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhZztcbiAgICB9O1xuXG4gICAgJC5mbi5wYWdpbmF0aW9uLkNvbnN0cnVjdG9yID0gUGFnaW5hdGlvbjtcblxuICAgICQuZm4ucGFnaW5hdGlvbi5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkLmZuLnBhZ2luYXRpb24gPSBvbGQ7XG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgJC5mbi5wYWdpbmF0aW9uLmRlZmF1bHRzID0ge1xuICAgICAgICBwYWdlU2l6ZTogMTAsXG4gICAgICAgIGRpc3BsYXlQYWdlOiA1LFxuICAgICAgICBjdXJyZW50UGFnZTogMSxcbiAgICAgICAgaXRlbXNDb3VudDogMCxcbiAgICAgICAgc3R5bGVDbGFzczogW10sXG4gICAgICAgIHBhZ2VzOiBudWxsLFxuICAgICAgICBzaG93Q3RybDogZmFsc2UsXG4gICAgICAgIG9uU2VsZWN0OiBudWxsLFxuICAgICAgICByZW1vdGU6IGZhbHNlXG4gICAgfVxuXG59KHdpbmRvdy5qUXVlcnkpXG4iXX0=
