"use strict";var config={isKhGh:yo.getQueryString("isKhGh")||0,role:localStorage.userRole,api_list:"/yjzb/showYgxzOrTc",power:localStorage.power};require(["select2"],function(e){window.app=new Vue({el:"#app",data:{s:{lastSaleName:"",list:[]},postData:{},role:config.role,year:"",power:config.power,isKhGh:config.isKhGh,kind:"7d2f882f13ea48e0a4c8acaeea53b3a5,30b1487221464d369ca4c2462ccca920,01dc6d29f1704efeab0376d327f47d98"},computed:{},created:function(){document.getElementById("app").classList.remove("hide")},mounted:function(){this.s.lastSaleName=this.select_init("[name=saleName]","请选择员工",1,this.kind);var a=this;a.year=a.FiscalYear(),$(".t1").val(a.nowMonth),$(".t2").val(a.nowMonth),$(".t3").val(a.nowMonth),$(".t4").val(a.nowMonth),$(".t6").val(a.nowMonth),"经理"!=config.role&&"客服"!=config.role||(a.postData.time=$(".t1").val(),this.list_Get(0)),"电销"==config.power&&(a.postData.userId=a.personId(),a.postData.time=$(".t1").val(),this.list_Get(0)),"商务顾问"==config.power&&"电销商务顾问"!=config.role&&(a.postData.userId=a.personId(),a.postData.time=$(".t2").val(),this.list_Get(1),$("#tab-2").addClass("active")),"电销商务顾问"==config.role&&(a.postData.userId=a.personId(),a.postData.time=$(".t6").val(),this.list_Get(5),$("#tab-6").addClass("active")),"运作"==config.power&&(a.postData.userId=a.personId(),this.list_Get(4),$("#tab-5").addClass("active")),lay(".test8").each(function(){laydate.render({elem:this,trigger:"click",type:"month"})}),laydate.render({elem:"#year",type:"year",done:function(e,t){a.year=e}})},methods:{list_Get:function(e){var t=this;t.postData.flag=e,console.log(t.postData),4==e&&(t.postData.timeStart=t.year+"-04-01",t.postData.timeEnd=Number(t.year)+1+"-03-31"),$.get(config.api_list,t.postData,function(e){"00"==e.error?t.s.list=e.result:layer.msg(e.msg)})},loading:function(e){"close"==e?layer.close(this.loadingSwitch):this.loadingSwitch=layer.load(3)},tab:function(e){var t=this;1==e&&(t.postData.userId="",t.postData.time=t.nowMonth,t.kind="7d2f882f13ea48e0a4c8acaeea53b3a5,30b1487221464d369ca4c2462ccca920,01dc6d29f1704efeab0376d327f47d98",this.s.lastSaleName=this.select_init("[name=saleName]","请选择员工",1,t.kind),t.list_Get(0)),2==e&&(t.postData.userId="",t.postData.time=t.nowMonth,t.kind="b729e9334ad64c15a4e47d88b8c2638f,e350acd05a6244c79136616302b7dfd6,008615f04f39499fb73e5f323add988a,6f247fed28e94194ac66020e55957496,28f1842e2463492a9eb6ddf0def91658,73340766cf3d43af91daff3128adad84,b62d6d19bed64ee199f2c1a5b252b57b",this.s.lastSaleName=this.select_init("[name=saleName]","请选择员工",1,t.kind),t.list_Get(1)),3==e&&(t.postData.userId="",t.postData.time=t.nowMonth,t.kind="fbe6f2f9535c4fce9f024f6cb999b2bd",this.s.lastSaleName=this.select_init("[name=saleName]","请选择员工",1,t.kind),t.list_Get(2)),4==e&&(t.postData.userId="",t.postData.time=t.nowMonth,t.kind="04fe5e23842f4b998216080bc3b61821",this.s.lastSaleName=this.select_init("[name=saleName]","请选择员工",1,t.kind),t.list_Get(3)),5==e&&(t.postData.userId="",t.postData.time="",t.kind="02178e62f17b4926bb7014f3ad5a1ebe,b729e9334ad64c15a4e47d88b8c2638f,e350acd05a6244c79136616302b7dfd6,008615f04f39499fb73e5f323add988a,6f247fed28e94194ac66020e55957496,28f1842e2463492a9eb6ddf0def91658,73340766cf3d43af91daff3128adad84,b62d6d19bed64ee199f2c1a5b252b57b",this.s.lastSaleName=this.select_init("[name=saleName]","请选择员工",1,t.kind),t.list_Get(4)),6==e&&(t.postData.userId="",t.postData.time=t.nowMonth,t.kind="90564dd8b75a4f6d815ce418462d401c",this.s.lastSaleName=this.select_init("[name=saleName]","请选择员工",1,t.kind),t.list_Get(5))},search1:function(){var e=this;"经理"==config.role||"客服"==config.role?e.postData.userId=$("#searchName1").val():e.postData.userId=e.personId(),e.postData.time=$(".t1").val(),e.list_Get(0)},search2:function(){var e=this;"经理"==config.role||"客服"==config.role?e.postData.userId=$("#searchName2").val():e.postData.userId=e.personId(),e.postData.time=$(".t2").val(),e.list_Get(1)},search3:function(){var e=this;"经理"==config.role||"客服"==config.role?e.postData.userId=$("#searchName3").val():e.postData.userId=e.personId(),e.postData.time=$(".t3").val(),e.list_Get(2)},search4:function(){var e=this;"经理"==config.role||"客服"==config.role?e.postData.userId=$("#searchName4").val():e.postData.userId=e.personId(),e.postData.time=$(".t4").val(),e.list_Get(3)},search5:function(){var e=this;"经理"==config.role||"客服"==config.role?e.postData.userId=$("#searchName5").val():e.postData.userId=e.personId(),e.list_Get(4)},search6:function(){var e=this;"经理"==config.role||"客服"==config.role?e.postData.userId=$("#searchName6").val():e.postData.userId=e.personId(),e.postData.time=$(".t6").val(),e.list_Get(5)},personId:function(){var e=localStorage.getItem("userInfo");return(e=$.parseJSON(e)).list[0].USER_ID},nowMonth:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1;return a=a<10?"0"+a:a,t.toString()+"-"+a.toString()},FiscalYear:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1;return"01"==a||"02"==a||"03"==a?Number(t)-1:t},select_init:function(e,t,a,s,o){return $(e).select2({placeholder:t||"请选择",language:"zh-CN",allowClear:a||!1,ajax:{url:"/user/getUserInfo",dataType:"json",type:"post",delay:250,data:function(e){return{page:e.page||1,ROLE_ID:o||s,data:{q:e.term||""}}},processResults:function(e,t){return t.page=t.page||1,config.htz_gw=e,$.each(e,function(){this.id=this.USER_ID,this.text=this.NAME}),{results:e,pagination:{more:10==e.length}}},cache:!0},minimumInputLength:0})}}})}),window.parentFnc=function(e){layer.closeAll(),window.app.getCaseRecord(window.app.type)};