"use strict";define(["require","yoValidate"],function(t){return Vue.component("pay-planedit",{template:'\n  <div class="ibox-content" id="dialog_payplan_edit">\n    <div class="row">\n        <div class="col-xs-12">\n            <div class="tabbable">\n                <div class="tab-content">\n                    <div class="tab-pane in active">\n                        <form action="" name="customerForm" id="dialog_payplan_edit_form" method="post" class="form form-horizontal">\n                            <div class="row m-t-sm">\n                                <div class="col-md-12">\n                                    <div class="form-group">\n                                        <label class="col-sm-2 control-label">类型&nbsp;<font color="red">*</font>:\n\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\n                                        <div class="col-sm-10">\n                                            <input type="text" class="form-control" disabled :value="c.type==0 ? \'按月分期\':\'约定分期\'" />\n                                        </div>\n                                    </div>\n                                </div>\n                                <div v-show="c.type==0">\n                                    <div class="col-md-12">\n                                        <div class="form-group">\n                                            <label class="col-sm-2 control-label">计划开始回款时间&nbsp;<font color="red">*</font>:\n\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\n                                            <div class="col-sm-10">\n                                                <input v-model="c.planTime"  class="span10 date-picker form-control  t1" type="text" data-validate="require"\n                                                    readonly="readonly"  placeholder="这里输入计划开始回款时间"\n                                                    value="">\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <div class="form-group">\n                                            <label class="col-sm-2 control-label">单次回款金额(元)&nbsp;<font color="red">*</font>:\n\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\n                                            <div class="col-sm-10">\n                                                <input v-model="c.onceMoney" class="form-control" data-validate="require|price|maxLength=50" type="text" placeholder="这里输入单次回款金额"\n                                                    value="">\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div v-show="c.type==1">\n                                    <div class="col-sm-12">\n                                        <div class="form-group">\n                                            <label class="col-sm-2 control-label">计划开始回款时间:\n\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\n                                            <div class="col-sm-10">\n                                                <input v-model="c.time"  class="span10 date-picker form-control  t2" type="text" data-validate="require"\n                                                    readonly="readonly"  placeholder="这里输入计划开始回款时间"\n                                                    value="">\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <div class="form-group">\n                                            <label class="col-sm-2 control-label">单次回款金额(元)&nbsp;<font color="red">*</font>:\n\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\n                                            <div class="col-sm-10">\n                                                <input v-model="c.money" class="form-control " data-validate="require|price|maxLength=50" type="text" value="">\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="col-md-12" v-show="c.type==0">\n                                    <div class="form-group">\n                                        <label class="control-label col-sm-2 no-padding-right">备注:</label>\n                                        <div class="col-sm-10">\n                                            <textarea v-model="c.remark" class="form-control" style=" height: 120px;" rows="15" cols="10" placeholder="这里输入备注"></textarea>\n                                        </div>\n                                    </div>\n                                </div>\n\t\t\t\t\t\t\t\t<div class="col-md-12" v-show="c.type==1">\n                                    <div class="form-group">\n                                        <label class="control-label col-sm-2 no-padding-right">备注:</label>\n                                        <div class="col-sm-10">\n                                            <textarea v-model="c.remark1" class="form-control" style=" height: 120px;" rows="15" cols="10" placeholder="这里输入备注"></textarea>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n  ',props:["orderId"],data:function(){return{c:{id:0,subId:0,type:0,planTime:"",onceMoney:"",periods:"",time:"",money:"",remark:"",remark1:""}}},mounted:function(){var e=this;laydate.render({elem:".t1",trigger:"click",done:function(t,n){e.c.planTime=t}}),laydate.render({elem:".t2",trigger:"click",done:function(t,n){e.c.time=t}})},methods:{init:function(t){for(var n in t)"time"!=n&&"planTime"!=n?Vue.set(this.c,n,t[n]):Vue.set(this.c,n,t[n].split(" ")[0]);""!=this.c.remark1&&(this.c.remark=this.c.remark1);var e=this,l=layer.open({type:1,title:"案件回款计划",content:$("#dialog_payplan_edit"),area:["800px","600px"],btn:["保存"],btnAlign:"c",yes:function(){e.save(function(){layer.close(l),e.$emit("refresh")})},end:function(){e.c.type=0,e.c.planTime="",e.c.onceMoney="",e.c.periods="",e.c.remark="",e.c.payList=[]}})},save:function(n){if(yoValidate("#dialog_payplan_edit_form",1)){var t={remark:this.c.remark||this.c.remark1};this.c.type?(t.subId=this.c.subId,t.time=this.c.time,t.money=this.c.money):(t.id=this.c.id,t.planTime=this.c.planTime,t.onceMoney=this.c.onceMoney),$.post("/workBench/updatePaymentPlan",t).done(function(t){n&&n()})}}}})});