"use strict";var config={role:localStorage.userRole,userId:JSON.parse(localStorage.userInfo).list[0].USER_ID,api_showReportInfo:"/report/showReportInfo",api_showReportInfoDetail:"/report/showReportInfoDetail",api_saveEvaluate:"/report/saveEvaluate",id:yo.getQueryString("id"),api_saveDpEvaluate:"/report/saveDpEvaluate.do"};window.app=new Vue({el:"#app",data:{role:config.role,userId:config.userId,tabStatus:1,c:{},d:{},commit:"",r:[],readId:"",user:"",type:0,timeStart:"",isDo:"",commentReply:"",commentReplyBoxId:"",loading:{loadingStatus:!1,loadingShow:!0}},created:function(){document.getElementById("app").classList.remove("hide")},mounted:function(){this.getReportDetail(config.id)},methods:{getReportDetail:function(e){this.readId=e;var t=this;$("#report_detail").addClass("hide"),$.post(config.api_showReportInfoDetail,{id:e}).done(function(e){$("#report_detail").removeClass("hide"),t.d=e.result})},submitReply:function(e,t){var o=this;o.commentReply?$.post(config.api_saveDpEvaluate,{reportUserId:o.d.userId,dpUserId:t,saleReportId:o.readId,Content:o.commentReply}).done(function(e){o.getReportDetail(o.readId),o.commentReply="",o.commentReplyBoxId=""}):layer.msg("请填写内容后提交")},submitCommit:function(t){var o=this;this.commit||layer.msg("请填写内容后提交"),$.post(config.api_saveEvaluate,{saleReportId:t,Content:o.commit}).done(function(e){o.getReportDetail(t),o.commit="",o.d.isDo||o.userId!=o.d.readMan||$.each(o.r,function(){$.each(this.reportInfo,function(){this.id==t&&(this.isDo=1)})})})},loading:function(e){"close"==e?layer.close(this.loadingSwitch):this.loadingSwitch=layer.load(3)}}}),window.parentFnc=function(e){layer.closeAll(),window.app.getCaseRecord(window.app.type)};