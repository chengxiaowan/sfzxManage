"use strict";var config={mode:yo.getQueryString("mode"),role:localStorage.userRole,reportId:yo.getQueryString("id"),api_getMonthData:"/order/getMonthData.do",api_saveMonthData:"/order/saveMonthData"};window.app=new Vue({el:"#app",data:{c:{jdjdmb:"",sjwc:"",sjrate:"",gbs:"",yjja:""},year:(new Date).getFullYear(),month:(new Date).getMonth()+1,userName:JSON.parse(localStorage.userInfo).list[0].NAME,thisMonth_hkje:0,thisMonth_yjsr:0,nextMonth_hkje:0,nextMonth_yjsr:0,thisMonth:[],nextMonth:[]},computed:{computed_jhrate:function(){return(100*(this.c.sjwc/this.c.jdjdmb||0)).toFixed(2)+"%"},computed_sjrate:function(){var t=(100*(this.thisMonth_hkje/this.c.syhkygje||0)).toFixed(2);return t==1/0?"":t+"%"}},created:function(){var u=this;document.getElementById("app").classList.remove("hide"),u.loading(),$.ajax({url:config.api_getMonthData,async:!1,data:{id:config.reportId},success:function(t){u.c=$.extend({},u.c,t.result),t.result.userName&&(u.userName=t.result.userName),document.getElementById("app").classList.remove("hide"),u.loading("close");var e=[],n=u.c.rq.split("@bzf@"),r=u.c.zqr.split("@bzf@"),o=u.c.zwr.split("@bzf@"),s=u.c.hkje.split("@bzf@"),i=u.c.yjsr.split("@bzf@"),a=u.c.jhnwzd.split("@bzf@"),h=0;if(n.length=1==(1==n.length&&""!=n[0])?n.length:n.length-1,n.length){for(h=0;h<n.length;h++)e[h]={},e[h].rq=n[h],e[h].zqr=r[h],e[h].zwr=o[h],e[h].hkje=s[h],e[h].yjsr=i[h],e[h].jhnwzd=a[h],u.thisMonth_hkje+=Number(s[h]),u.thisMonth_yjsr+=Number(i[h]);e[0].rq&&(u.thisMonth=e)}var c=[],l=u.c.yjrq.split("@bzf@"),d=u.c.yjzqr.split("@bzf@"),p=u.c.yjzwr.split("@bzf@"),j=u.c.yjhkje.split("@bzf@"),f=u.c.yjyjsr.split("@bzf@"),g=[];if(u.c.yjndfx&&u.c.yjndfx[0]&&(g=u.c.yjndfx.split("@bzf@")),l.length=1==l.length&&""!=l[0]?l.length:l.length-1,l.length){for(h=h=0;h<l.length;h++)c[h]={},c[h].rq=l[h],c[h].zqr=d[h],c[h].zwr=p[h],c[h].hkje=j[h],c[h].yjsr=f[h],c[h].ndfx=g[h],u.nextMonth_hkje+=Number(j[h]),u.nextMonth_yjsr+=Number(f[h]);c[0].rq&&(u.nextMonth=c)}}}),config.mode&&$("#app").find("input,textarea").prop("readonly",!0)},methods:{loading:function(t){"close"==t?layer.close(this.loadingSwitch):this.loadingSwitch=layer.load(3)},save:function(t){this.c.yjndfx=[];for(var e=0;e<this.nextMonth.length;e++)this.c.yjndfx.push(this.nextMonth[e].ndfx);this.c.yjndfx=this.c.yjndfx.join("@bzf@"),this.c.status=t,this.c.title=document.getElementById("title").innerHTML,this.c.jhrate=this.jhrate,$.post(config.api_saveMonthData,this.c,function(t){(t.error="00")?(parent&&parent.layer.closeAll(),parent&&parent.location.reload()):layer.msg(t.msg)})},edit:function(t){this.c.id=config.reportId,this.save(t)}}}),window.parentFnc=function(t){layer.closeAll(),window.app.getCaseRecord(window.app.type)};