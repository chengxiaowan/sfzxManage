"use strict";var config={isKhGh:yo.getQueryString("isKhGh")||0,role:localStorage.userRole,power:localStorage.power,api_xspmReport:"/report/xspmReport.do",api_SaleYjtj:"/mainIndex/showSaleYjtj",api_Xstj:"/mainIndex/showSwgwXstj",api_Yjmb:"/mainIndex/showSwgwYjmb",api_yzjb:"/mainIndex/showYzsjdk",api_detail:"/main/showdfSaleProcessDetail.do",api_zhou:"/report/showReportDate.do",api_all:"/mainIndex/showAll",api_task:"/workBench/taskList.do",api_shenhe:"/workBench/mysh.do",api_wdtx:"/workBench/callList.do?flag=2",api_gqtx:"/workBench/callList.do?flag=1",api_swgw:"/mainIndex/showSwgwYjmb",flag:yo.getQueryString("flag"),api_dxswgw:"/mainIndex/showDxSwgwXstj",api_dxswgwDetail:"/mainIndex/showDxSwgwXstjDetail",api_showWindow:"/mainIndex/showWindow",api_yz:"/mainIndex/showYzjbDetatil",api_num:"/main/xszs"},colors=["#666666","#666666"],option={title:{text:"电话量",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:18}},tooltip:{trigger:"axis"},legend:{data:["电话量","有效电话量"]},xAxis:[{type:"category",data:["周一","周二","周三","周四","周五"]}],yAxis:[{type:"value",name:"电话量",position:"left",axisLine:{lineStyle:{color:colors[0]}}},{type:"value",name:"有效电话量",position:"right",min:0,axisLine:{lineStyle:{color:colors[1]}}}],series:[{name:"电话量",type:"bar",data:[],barWidth:18,itemStyle:{normal:{color:"#a2b9cb"}}},{name:"有效电话量",type:"bar",yAxisIndex:1,data:[],barWidth:18,itemStyle:{normal:{color:"#459df5"}}}]};function salerList(e,t,a,i,n){layer.open({type:2,title:"合同记录详情",area:["100%","100%"],content:"saler_sales_detail.html?saleId="+e+"&saleName="+t+"&startTime="+a+"&endTime="+i+"&flag="+n})}var app1={},option1=null;option1={title:{text:"意向客户数",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:16}},tooltip:{trigger:"axis"},legend:{data:["意向客户数"]},xAxis:{type:"category",data:["周一","周二","周三","周四","周五"]},yAxis:{type:"value"},series:[{data:[],type:"line",symbol:"circle",symbolSize:6,itemStyle:{normal:{color:"#fdb54e"}}}]};var app2={},option2=null;option2={title:{text:"拜访量",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:16}},tooltip:{trigger:"axis"},legend:{data:["拜访量"]},xAxis:{type:"category",data:["周一","周二","周三","周四","周五"]},yAxis:{type:"value"},series:[{data:[820,932,901,934,1290],type:"line",symbol:"circle",symbolSize:6,itemStyle:{normal:{color:"#fdb54e"}}}]};var app3={},option3=null;option3={title:{text:"签单量",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:16}},tooltip:{trigger:"axis"},legend:{data:["签单量"]},xAxis:{type:"category",data:["周一","周二","周三","周四","周五"]},yAxis:{type:"value"},series:[{data:[],type:"line",symbol:"circle",symbolSize:6,itemStyle:{normal:{color:"#459df5"}}}]};var option4={title:{text:"",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:18}},tooltip:{trigger:"axis"},legend:{data:["已成交客户数","订单数量","订单总金额","到款金额"]},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value",name:"数量",position:"left"},{type:"value",name:"金额",position:"right"}],series:[{name:"已成交客户数",type:"bar",data:[],barWidth:20,itemStyle:{normal:{color:"#a2b9cb"}}},{name:"订单数量",type:"bar",data:[],barWidth:20,itemStyle:{normal:{color:"#459df5"}}},{name:"订单总金额",type:"bar",yAxisIndex:1,data:[],barWidth:20,itemStyle:{normal:{color:"#52c1a6"}}},{name:"到款金额",type:"bar",yAxisIndex:1,data:[],barWidth:20,itemStyle:{normal:{color:"#fdb54e"}}}]},app5={},option5=null;option5={title:{text:"",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:16}},tooltip:{trigger:"axis"},legend:{data:["商务顾问业绩目标完成情况"]},xAxis:{type:"category",data:[]},yAxis:{type:"value",max:""},series:[{data:[],type:"line",symbol:"circle",symbolSize:6,areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#d9ebfd"},{offset:.5,color:"#f6fafe"},{offset:.8,color:"#ffffff"}])}},itemStyle:{normal:{color:"#459df5"}}}]};var app5_dx={},option5_dx=null;option5_dx={title:{text:"",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:18}},tooltip:{trigger:"axis"},legend:{data:["拜访量","签约客户数","订单金额"]},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value",name:"数量",position:"left"},{type:"value",name:"金额",position:"right"}],series:[{name:"拜访量",type:"bar",data:[],barWidth:20,itemStyle:{normal:{color:"#a2b9cb"}}},{name:"签约客户数",type:"bar",data:[],barWidth:20,itemStyle:{normal:{color:"#459df5"}}},{name:"订单金额",type:"bar",yAxisIndex:1,data:[],barWidth:20,itemStyle:{normal:{color:"#52c1a6"}}}]};var option6={title:{text:"",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:18}},tooltip:{trigger:"axis"},legend:{data:["电话量","意向客户数"]},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value",name:"电话量",position:"left"},{type:"value",name:"意向客户数",position:"right"}],series:[{name:"电话量",type:"bar",data:[],barWidth:20,itemStyle:{normal:{color:"#a2b9cb"}}},{name:"意向客户数",type:"bar",yAxisIndex:1,data:[],barWidth:20,itemStyle:{normal:{color:"#459df5"}}}]},app7={},option7=null;option7={title:{text:"",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:16}},tooltip:{trigger:"axis"},legend:{data:["运作简报"]},xAxis:{type:"category",data:[]},yAxis:{type:"value",max:""},series:[{data:[],type:"line",symbol:"circle",symbolSize:6,areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#d9ebfd"},{offset:.5,color:"#f6fafe"},{offset:.8,color:"#ffffff"}])}},itemStyle:{normal:{color:"#459df5"}}}]};var dxOnly={title:{text:"",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:18}},tooltip:{trigger:"axis"},legend:{data:["电话量","意向客户数"]},grid:{x:40,x2:40},xAxis:[{type:"category",data:["四月","五月","六月","七月","八月","九月","十月","十一月","十二月","一月","二月","三月"]}],yAxis:[{type:"value",name:"电话量",position:"left"},{type:"value",name:"意向客户数",position:"right"}],series:[{name:"电话量",type:"bar",data:[],barWidth:10,itemStyle:{normal:{color:"#459df5"}}},{name:"意向客户数",type:"bar",yAxisIndex:1,data:[],barWidth:10,itemStyle:{normal:{color:"#53c1a6"}}}]},pieChartOption={title:{},toolbox:{show:!1,feature:{restore:{show:!1},saveAsImage:{show:!1}}},tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"电话量",center:["50%","60%"],radius:"90%",axisLine:{lineStyle:{color:[[.3,"#ff878e"],[.8,"#ffce89"],[1,"#5bd4d1"]],width:10}},axisTick:{length:15,lineStyle:{color:"auto"}},splitLine:{length:20,lineStyle:{color:"auto"}},pointer:{width:3},type:"gauge",z:3,min:0,max:220,splitNumber:10,detail:{formatter:"{value}%"},data:[{value:45,name:"电话量",label:{textStyle:{fontSize:16}}}]}]},pieChartOption2={title:{},toolbox:{show:!1,feature:{restore:{show:!1},saveAsImage:{show:!1}}},tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"意向客户数",center:["50%","60%"],radius:"90%",axisLine:{lineStyle:{color:[[.3,"#ff878e"],[.8,"#ffce89"],[1,"#5bd4d1"]],width:10}},axisTick:{length:15,lineStyle:{color:"auto"}},splitLine:{length:20,lineStyle:{color:"auto"}},pointer:{width:3},type:"gauge",z:3,min:0,max:220,splitNumber:10,detail:{formatter:"{value}%"},data:[{value:45,name:"意向客户数",label:{textStyle:{fontSize:16}}}]}]},pieChartOption_1={title:{},toolbox:{show:!1,feature:{restore:{show:!1},saveAsImage:{show:!1}}},tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"业绩到款",center:["50%","60%"],radius:"90%",axisLine:{lineStyle:{color:[[.3,"#ff878e"],[.8,"#ffce89"],[1,"#5bd4d1"]],width:10}},axisTick:{length:15,lineStyle:{color:"auto"}},splitLine:{length:20,lineStyle:{color:"auto"}},pointer:{width:3},type:"gauge",z:3,min:0,max:220,splitNumber:10,detail:{formatter:"{value}%"},data:[{value:45,name:"业绩到款",label:{textStyle:{fontSize:16}}}]}]},pieChartOption_2={title:{},toolbox:{show:!1,feature:{restore:{show:!1},saveAsImage:{show:!1}}},tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"合同数量",center:["50%","60%"],radius:"90%",axisLine:{lineStyle:{color:[[.3,"#ff878e"],[.8,"#ffce89"],[1,"#5bd4d1"]],width:10}},axisTick:{length:15,lineStyle:{color:"auto"}},splitLine:{length:20,lineStyle:{color:"auto"}},pointer:{width:3},type:"gauge",z:3,min:0,max:220,splitNumber:10,detail:{formatter:"{value}%"},data:[{value:45,name:"合同数量",label:{textStyle:{fontSize:16}}}]}]},pieChartOption_3={title:{},toolbox:{show:!1,feature:{restore:{show:!1},saveAsImage:{show:!1}}},tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"委案金额",center:["50%","60%"],radius:"90%",axisLine:{lineStyle:{color:[[.3,"#ff878e"],[.8,"#ffce89"],[1,"#5bd4d1"]],width:10}},axisTick:{length:15,lineStyle:{color:"auto"}},splitLine:{length:20,lineStyle:{color:"auto"}},pointer:{width:3},type:"gauge",z:3,min:0,max:220,splitNumber:10,detail:{formatter:"{value}%"},data:[{value:45,name:"委案金额",label:{textStyle:{fontSize:16}}}]}]},pieChartOption_4={title:{},toolbox:{show:!1,feature:{restore:{show:!1},saveAsImage:{show:!1}}},tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"拜访量",center:["50%","60%"],radius:"90%",axisLine:{lineStyle:{color:[[.3,"#ff878e"],[.8,"#ffce89"],[1,"#5bd4d1"]],width:10}},axisTick:{length:15,lineStyle:{color:"auto"}},splitLine:{length:20,lineStyle:{color:"auto"}},pointer:{width:3},type:"gauge",z:3,min:0,max:220,splitNumber:10,detail:{formatter:"{value}%"},data:[{value:45,name:"拜访量",label:{textStyle:{fontSize:16}}}]}]},pieChartOption_dx1={title:{},toolbox:{show:!1,feature:{restore:{show:!1},saveAsImage:{show:!1}}},tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"拜访量",center:["50%","60%"],radius:"90%",axisLine:{lineStyle:{color:[[.3,"#ff878e"],[.8,"#ffce89"],[1,"#5bd4d1"]],width:10}},axisTick:{length:15,lineStyle:{color:"auto"}},splitLine:{length:20,lineStyle:{color:"auto"}},pointer:{width:3},type:"gauge",z:3,min:0,max:220,splitNumber:10,detail:{formatter:"{value}%"},data:[{value:45,name:"拜访量",label:{textStyle:{fontSize:16}}}]}]},pieChartOption_dx2={title:{},toolbox:{show:!1,feature:{restore:{show:!1},saveAsImage:{show:!1}}},tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"签约客户数",center:["50%","60%"],radius:"90%",axisLine:{lineStyle:{color:[[.3,"#ff878e"],[.8,"#ffce89"],[1,"#5bd4d1"]],width:10}},axisTick:{length:15,lineStyle:{color:"auto"}},splitLine:{length:20,lineStyle:{color:"auto"}},pointer:{width:3},type:"gauge",z:3,min:0,max:220,splitNumber:10,detail:{formatter:"{value}%"},data:[{value:45,name:"签约客户数",label:{textStyle:{fontSize:16}}}]}]},pieChartOption_dx3={title:{},toolbox:{show:!1,feature:{restore:{show:!1},saveAsImage:{show:!1}}},tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"订单金额",center:["50%","60%"],radius:"90%",axisLine:{lineStyle:{color:[[.3,"#ff878e"],[.8,"#ffce89"],[1,"#5bd4d1"]],width:10}},axisTick:{length:15,lineStyle:{color:"auto"}},splitLine:{length:20,lineStyle:{color:"auto"}},pointer:{width:3},type:"gauge",z:3,min:0,max:220,splitNumber:10,detail:{formatter:"{value}%"},data:[{value:45,name:"订单金额",label:{textStyle:{fontSize:16}}}]}]},app={},yzoption=null;yzoption={title:{text:"",textStyle:{color:"#3a3a3a",fontStyle:"normal",fontSize:16}},tooltip:{trigger:"axis"},legend:{data:["商务顾问业绩目标完成情况"]},xAxis:{type:"category",data:[]},yAxis:{type:"value",max:""},series:[{data:[],type:"line",symbol:"circle",symbolSize:6,areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#d9ebfd"},{offset:.5,color:"#f6fafe"},{offset:.8,color:"#ffffff"}])}},itemStyle:{normal:{color:"#459df5"}}}]};var pieChartOption_yz={title:{},toolbox:{show:!1,feature:{restore:{show:!1},saveAsImage:{show:!1}}},tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"到款金额",center:["50%","60%"],radius:"90%",axisLine:{lineStyle:{color:[[.3,"#ff878e"],[.8,"#ffce89"],[1,"#5bd4d1"]],width:10}},axisTick:{length:15,lineStyle:{color:"auto"}},splitLine:{length:20,lineStyle:{color:"auto"}},pointer:{width:3},type:"gauge",z:3,min:0,max:220,splitNumber:10,detail:{formatter:"{value}%"},data:[{value:45,name:"到款金额",label:{textStyle:{fontSize:16}}}]}]};function a(){app.taskList(),app.shen()}require(["select2"],function(e){window.app=new Vue({el:"#app",data:{role:config.role,power:config.power,year:"",startyear:"",endyear:"",isactive:!0,month:"",monthShow:!0,jiduShow:!1,show:!0,show1:!1,show2:!0,show3:!1,show4:!1,show5:!1,c:[],c1:[],c2:[],c4:[],c_dx:[],year1:"",month1:"",SaleYjtj:{ycj:"",dd:"",ddzje:"",yhk:"",dk:""},Salejb:{ddzje:"",hkje:"",ycjkh:"",yjje:"",yxkhs:""},postSaleYjtj:{},postSalejb:{},cainian:"",YjmbTime:"",YjmbType:"0",yjmbMonth:"",yjmbMonth_dx:"",qubie:!1,qubie1:!0,sevens:[],cjd:"",task:{list:[]},shenhe:{list:[]},mytx:{list:[]},gqtx:{list:[]},postDataTask:{},postDataShenhe:{},postDataMytx:{},postDataGqtx:{},dxmonth:"",dx:{dhl:"",mbdhl:"",yxkhs:"",mbyxkhs:"",list:[]},swgw:{ddzje:"",htsl:"",mbddzje:"",mbhtsl:"",mbyjdk:"",yjdk:"",mbbfl:"",bfl:""},idchange3:"",dxswgw:{bfl:"",mbbfl:"",khs:"",mbkhs:"",ddje:"",mbddje:""},yz:{mbdkje:0,dkje:0},yzmonth:"",tNum1:0,tNum2:0,tNum3:0,yzl_time:"",swl_time:"",dxl_time:"",dgl_time:"",yzl_id:"",swl_id:"",dxl_id:"",dgl_id:""},watch:{year:function(e){this.getSaleYjtj(e)},startyear:function(e){this.getSalejb(this.startyear,this.endyear)},endyear:function(e){this.getSalejb(this.startyear,this.endyear)},year1:function(e){this.getData1(e)},cainian:function(e){this.getCainian(e)},YjmbTime:function(e){this.getYjmb(e,this.YjmbType,0)},YjmbType:function(e){console.log(e),0==e?(this.getYjmb(this.YjmbTime,e,0),this.qubie1=!0,this.qubie=!1):(this.getYjmb(this.yjmbMonth,e,1),this.qubie1=!1,this.qubie=!0)},month1:function(e){this.getData2(this.month1)},month:function(e){this.getData(e,0,0)},dxmonth:function(e){this.getDataDx(e,1)},yzmonth:function(e){this.getDatayz(e)}},computed:{dhl:function(){for(var e=[],t=0;t<this.c.length;t++){var a=this.c[t];e.push(a.dhl||0)}return e},yxdhl:function(){for(var e=[],t=0;t<this.c.length;t++){var a=this.c[t];e.push(a.yxdhl||0)}return e},name1:function(){for(var e=[],t=0;t<this.c1.length;t++){var a=this.c1[t];e.push(a.name)}return e},khsl:function(){for(var e=[],t=0;t<this.c1.length;t++){var a=this.c1[t];e.push(a.khsl||0)}return e},ddsl:function(){for(var e=[],t=0;t<this.c1.length;t++){var a=this.c1[t];e.push(a.ddsl||0)}return e},ddzje:function(){for(var e=[],t=0;t<this.c1.length;t++){var a=this.c1[t];e.push(a.ddzje.toFixed(2)||0)}return e},dkje:function(){for(var e=[],t=0;t<this.c1.length;t++){var a=this.c1[t];e.push(a.dkje.toFixed(2)||0)}return e},name_dx:function(){for(var e=[],t=0;t<this.c_dx.length;t++){var a=this.c_dx[t];e.push(a.name)}return e},bfl_dx:function(){for(var e=[],t=0;t<this.c_dx.length;t++){var a=this.c_dx[t];e.push(a.bfl||0)}return e},ddzje_dx:function(){for(var e=[],t=0;t<this.c_dx.length;t++){var a=this.c_dx[t];e.push(a.ddzje.toFixed(2)||0)}return e},khsl_dx:function(){for(var e=[],t=0;t<this.c_dx.length;t++){var a=this.c_dx[t];e.push(a.khsl||0)}return e}},created:function(){document.getElementById("app").classList.remove("hide")},mounted:function(){var a=this;a.showMonthFirstDay(),a.year=a.FiscalYear(),a.year1=a.FiscalYear(),a.cainian=a.FiscalYear(),a.yzmonth=a.FiscalYear(),a.dxmonth=a.FiscalYear();var e=a.nowMonth().split("-")[1];"04"==e||"05"==e||"06"==e?a.YjmbTime=0:"07"==e||"08"==e||"09"==e?a.YjmbTime=1:"10"==e||"11"==e||"12"==e?a.YjmbTime=2:"01"!=e&&"02"!=e&&"03"!=e||(a.YjmbTime=3),laydate.render({elem:"#year",type:"year",done:function(e,t){a.year=e}}),laydate.render({elem:"#year1",type:"year",done:function(e,t){a.year1=e}});var i=laydate.render({elem:"#startyear",max:a.endyear,done:function(e,t){""!==(a.startyear=e)?(n.config.min.year=t.year,n.config.min.month=t.month-1,n.config.min.date=t.date):(n.config.min.year="",n.config.min.month="",n.config.min.date="")}}),n=laydate.render({elem:"#endyear",min:a.startyear,done:function(e,t){""!==(a.endyear=e)?(i.config.max.year=t.year,i.config.max.month=t.month-1,i.config.max.date=t.date):(i.config.max.year="",i.config.max.month="",i.config.max.date="")}});laydate.render({elem:"#month1",type:"month",done:function(e,t){a.month1=e}}),laydate.render({elem:"#yjmbMonth",type:"month",done:function(e,t){a.yjmbMonth=e,a.getYjmb(a.yjmbMonth,a.YjmbType,1)}}),laydate.render({elem:"#yjmbMonth_dx",type:"month",done:function(e,t){a.yjmbMonth_dx=e,a.getYjmb_dx()}}),laydate.render({elem:"#cainian",type:"year",done:function(e,t){a.cainian=e}}),laydate.render({elem:"#dxmonth",type:"year",done:function(e,t){a.dxmonth=e}}),laydate.render({elem:"#remind_time",type:"datetime",min:a.minDate()}),laydate.render({elem:"#yzmonth",type:"year",done:function(e,t){a.yzmonth=e}}),this.month1=this.nowMonth(),this.yjmbMonth=this.nowMonth(),this.yjmbMonth_dx=this.nowMonth(),this.getSaleYjtj(a.year),this.getSalejb(this.startyear,this.endyear),this.getData1(a.year1),this.getData2(this.month1),this.getCainian(a.cainian),this.getYjmb(this.YjmbTime,this.YjmbType,0),this.showWen(),this.taskList(),this.shen(),this.tx1(),this.tx2(),this.getDataDx(a.dxmonth),this.getDataSwgw(),this.getDataSwgw_dx(),this.getYjmb_dx(),this.showWindow(),this.getDatayz(a.yzmonth),this.getNum()},methods:{loading:function(e){"close"==e?layer.close(this.loadingSwitch):this.loadingSwitch=layer.load(3)},minDate:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},changeActive:function(e){var t=this;if(1==e)t.show=!0,t.show1=!1,t.monthShow=!0,t.jiduShow=!1,t.getData(t.month,0,0);else{t.show=!1,t.show1=!0,t.monthShow=!1,t.jiduShow=!0;var a=(new Date).getFullYear(),i=t.nowMonth().split("-")[1];(new Date).getFullYear()==a&&("01"==i||"02"==i||"03"==i)?a-=1:a=a,t.cjd=a+"-04-01~"+a+"-06-30",t.getData(t.cjd,1,1),t.show2=!0,t.show3=!1,t.show4=!1,t.show4=!1}},htzjd:function(e){var t,a=this,i=(new Date).getFullYear(),n=a.nowMonth().split("-")[1];(new Date).getFullYear()==i&&("01"==n||"02"==n||"03"==n)?i-=1:i=i,1==e?(a.cjd=i+"-04-01~"+i+"-06-30",a.show2=!0,a.show3=!1,a.show4=!1,a.show5=!1,t=1):2==e?(a.cjd=i+"-07-01~"+i+"-09-30",a.show2=!1,a.show3=!0,a.show4=!1,a.show4=!1,t=2):3==e?(a.cjd=i+"-10-01~"+i+"-12-31",a.show2=!1,a.show3=!1,a.show4=!0,a.show5=!1,t=3):4==e&&(i=Number(i)+1,a.cjd=i+"-01-01~"+i+"-03-31",a.show2=!1,a.show3=!1,a.show4=!1,a.show5=!0,t=4),a.getData(a.cjd,1,t)},select_init:function(e,t,a,i,n){return $(e).select2({placeholder:t||"请选择",language:"zh-CN",allowClear:a||!1,ajax:{url:"/user/getUserInfo",dataType:"json",type:"post",delay:250,data:function(e){return{page:e.page||1,ROLE_ID:n||i,data:{q:e.term||""}}},processResults:function(e,t){return t.page=t.page||1,config.htz_gw=e,$.each(e,function(){this.id=this.USER_ID,this.text=this.NAME}),{results:e,pagination:{more:10==e.length}}},cache:!0},minimumInputLength:0})},getSaleYjtj:function(e){var t=this;t.loading(),t.postSaleYjtj.time=e,$.ajax({type:"post",url:config.api_SaleYjtj,data:t.postSaleYjtj,async:!0}).done(function(e){t.SaleYjtj.ycj=e.result.ycjkh,t.SaleYjtj.dd=e.result.ddsl,t.SaleYjtj.ddzje=e.result.ddzje,t.SaleYjtj.yhk=e.result.hkje,t.SaleYjtj.dk=e.result.yjje,t.loading("close")})},getSalejb:function(e,t){var a=this;a.loading();var i=e,n=t;a.postSalejb.startTime=i,a.postSalejb.endTime=n,$.ajax({type:"post",url:config.api_SaleYjtj,data:a.postSalejb,async:!0}).done(function(e){a.Salejb.ddzje=e.result.ddzje,a.Salejb.hkje=e.result.hkje,a.Salejb.ycjkh=e.result.ycjkh,a.Salejb.yjje=e.result.yjje,a.Salejb.yxkhs=e.result.yxkhs,a.loading("close")})},getData:function(e,u,y){var x=this;console.log(e);var t=e.split("~"),g=t[0],f=t[1];if(x.loading(),"经理"!=x.power&&"商务顾问"!=x.power&&"电销"!=x.power)return!1;var a={};"经理"==x.power?(console.log(x.power),a={flag:u,startTime:g,endTime:f}):a={flag:u,startTime:g,endTime:f,saleId:x.personId()},$.ajax({url:config.api_all,async:!0,data:a,success:function(e){if(x.loading("close"),"00"==e.error){var s=[];for(i=0;i<e.result1.length;i++)s.push(e.result1[i].time);if(0==y?(option1.xAxis.data=["周一","周二","周三","周四","周五"],option2.xAxis.data=["周一","周二","周三","周四","周五"],option3.xAxis.data=["周一","周二","周三","周四","周五"],option.xAxis[0].data=["周一","周二","周三","周四","周五"]):1==y?(option1.xAxis.data=["四月","五月","六月"],option2.xAxis.data=["四月","五月","六月"],option3.xAxis.data=["四月","五月","六月"],option.xAxis[0].data=["四月","五月","六月"]):2==y?(option1.xAxis.data=["七月","八月","九月"],option2.xAxis.data=["七月","八月","九月"],option3.xAxis.data=["七月","八月","九月"],option.xAxis[0].data=["七月","八月","九月"]):3==y?(option1.xAxis.data=["十月","十一月","十二月"],option2.xAxis.data=["十月","十一月","十二月"],option3.xAxis.data=["十月","十一月","十二月"],option.xAxis[0].data=["十月","十一月","十二月"]):4==y&&(option1.xAxis.data=["一月","二月","三月"],option2.xAxis.data=["一月","二月","三月"],option3.xAxis.data=["一月","二月","三月"],option.xAxis[0].data=["一月","二月","三月"]),x.c=e.result1,"经理"==x.power||"电销"==x.power){x.chart_init(g,f,y,u,s);for(var t=e.result2,a=[],i=0;i<t.length;i++){var n=t[i];a.push(n.yxkhs)}var o=Number(Math.max.apply(null,a));o+=.2*o;var l=echarts.init(document.getElementById("main1"));option1.yAxis.max=Math.ceil(o),option1.series[0].data=a,l.setOption(option1),l.off("click"),l.on("click",function(e){if(0==u)g=s[e.dataIndex],f=s[e.dataIndex];else if(1==u){var t=s[e.dataIndex],a=t.split("-"),i=a[0],n=a[1],o=new Date(i,n,0).getDate();g=t+"-01",f=t+"-"+o}layer.open({type:2,title:"意向客户数列表",content:"/static/page/index/saler_customer_list.html?startTime="+g+"&endTime="+f,area:["100%","100%"]})})}if("经理"==x.power||"商务顾问"==x.power){var r=e.result3,d=[];for(i=0;i<r.length;i++){n=r[i];d.push(n.bfl)}o=Number(Math.max.apply(null,d));o+=.2*o;var p=echarts.init(document.getElementById("main2"));option2.yAxis.max=Math.ceil(o),option2.series[0].data=d,p.setOption(option2),p.off("click"),p.on("click",function(e){if(0==u)g=s[e.dataIndex],f=s[e.dataIndex];else if(1==u){var t=s[e.dataIndex],a=t.split("-"),i=a[0],n=a[1],o=new Date(i,n,0).getDate();g=t+"-01",f=t+"-"+o}layer.open({type:2,title:"拜访量列表",content:"/static/page/index/saler_bfl_list.html?startTime="+g+"&endTime="+f+"&divide=1",area:["100%","100%"]})});var h=e.result4,c=[];for(i=0;i<h.length;i++){n=h[i];c.push(n.qdl)}o=Number(Math.max.apply(null,c));o+=.2*o;var m=echarts.init(document.getElementById("main3"));option3.yAxis.max=Math.ceil(o),option3.series[0].data=c,m.setOption(option3),m.off("click"),m.on("click",function(e){if(0==u)g=s[e.dataIndex],f=s[e.dataIndex];else if(1==u){var t=s[e.dataIndex],a=t.split("-"),i=a[0],n=a[1],o=new Date(i,n,0).getDate();g=t+"-01",f=t+"-"+o}layer.open({type:2,title:"签单量列表",content:"/static/page/index/saler_qdl_list.html?startTime="+g+"&endTime="+f+"&divide=1",area:["100%","100%"]})})}}else layer.msg(e.msg)}})},chart_init:function(l,r,e,d,p){this.myChart=echarts.init(document.getElementById("main"));var t,a,i=this.dhl,n=this.yxdhl;t=Number(Math.max.apply(null,i)),t+=.1*t,a=Number(Math.max.apply(null,n)),a+=a,option.yAxis[0].max=Math.ceil(t),option.yAxis[1].max=Math.ceil(a),option.series[0].data=i,option.series[1].data=n,this.myChart.setOption(option),this.myChart.off("click"),this.myChart.on("click",function(e){if(0==d)l=p[e.dataIndex],r=p[e.dataIndex];else if(1==d){var t=p[e.dataIndex],a=t.split("-"),i=a[0],n=a[1],o=new Date(i,n,0).getDate();l=t+"-01",r=t+"-"+o}var s="/static/page/index/saler_follow_list.html?startTime="+l+"&endTime="+r+"&type=1";if(0==e.seriesIndex)layer.open({type:2,title:"电话量",content:s,area:["100%","100%"]});else if(1==e.seriesIndex)layer.open({type:2,title:"有效电话量",content:s+"&valid=1",area:["100%","100%"]})})},getData1:function(t){var a=this;if(a.loading(),"经理"!=a.power)return!1;$.ajax({url:config.api_Xstj,async:!0,data:{time:t},success:function(e){if(a.loading("close"),"00"==e.error){if(a.c1=e.result,"经理"!=a.power)return!1;a.chart_init1(t,a.c1)}else layer.msg(e.msg)}})},chart_init1:function(e,a){this.myChart4=echarts.init(document.getElementById("main4")),option4.xAxis[0].data=this.name1;var t,i,n=this.khsl,o=this.ddsl,s=this.ddzje,l=this.dkje;option4.series[0].data=n,option4.series[1].data=o,option4.series[2].data=s,option4.series[3].data=l,t=Number(Math.max.apply(null,n.concat(o))),t+=t,option4.yAxis[0].max=Math.ceil(t),i=Number(Math.max.apply(null,s.concat(l))),i+=.1*i,option4.yAxis[1].max=Math.ceil(i),startTime=Number(e)+"-04-01",endTime=Number(e)+1+"-03-31",this.myChart4.setOption(option4),this.myChart4.off("click"),this.myChart4.on("click",function(e){console.log(e);var t=a[e.dataIndex].userId;if(0==e.seriesIndex)layer.open({type:2,title:"已成交客户列表",content:"/static/page/index/saler_turnover_list.html?startTime="+startTime+"&endTime="+endTime+"&flag=1&USER_ID="+t,area:["100%","100%"]});else if(1==e.seriesIndex)layer.open({type:2,title:"订单列表",content:"/static/page/index/saler_turnover_list.html?startTime="+startTime+"&endTime="+endTime+"&flag=2&USER_ID="+t,area:["100%","100%"]});else if(2==e.seriesIndex)layer.open({type:2,title:"订单列表",content:"/static/page/index/saler_turnover_list.html?startTime="+startTime+"&endTime="+endTime+"&flag=2&USER_ID="+t,area:["100%","100%"]});else if(3==e.seriesIndex)layer.open({type:2,title:"回款列表",content:"/static/page/index/saler_turnover_list.html?startTime="+startTime+"&endTime="+endTime+"&flag=3&USER_ID="+t,area:["100%","100%"]})})},getData2:function(e){var d,p=this,t=e.split("-"),a=t[0],i=t[1],n=new Date(a,i,0).getDate();d="01"==i||"02"==i||"03"==i?a-1:a,p.loading(),"经理"!=p.power&&"电销主管"!=p.role&&"电销员工"!=p.role||$.ajax({url:config.api_detail,async:!0,data:{startTime:e+"-01",endTime:e+"-"+n},success:function(n){if(p.loading("close"),"00"==n.error){for(var e=[],t=[],a=[],i=0;i<n.result.length;i++){var o=n.result[i];e.push(o.name),t.push(o.dhl),null!=o.yxkhs&&a.push(o.yxkhs)}var s=Number(Math.max.apply(null,t));s+=.2*s;var l=Number(Math.max.apply(null,a));l+=l;var r=echarts.init(document.getElementById("main6"));option6.xAxis[0].data=e,option6.series[0].data=t,option6.series[1].data=a,option6.yAxis[0].max=Math.ceil(s),option6.yAxis[1].max=Math.ceil(l),r.setOption(option6),r.off("click"),r.on("click",function(e){console.log(e);var t=n.result[e.dataIndex].saleId,a=n.result[e.dataIndex].name,i="/static/page/dxPerson.html?time="+d+"&id="+t+"&saleName="+a;layer.open({type:2,title:"电销业绩目标完成情况",content:i,area:["100%","100%"]})})}else layer.msg(n.msg)}})},getDataDx:function(e,r){var t,a,d,p,h,c,m=this,u=m.nowMonth();u.split("-")[1],(new Date).getFullYear();t=e+"-04-01",a=Number(e)+1+"-03-31",m.dxl_time=t+","+a;var y=u;return m.loading(),"电销"==m.power&&("电销主管"!=m.role&&void $.ajax({url:config.api_detail,async:!0,data:{startTime:t,endTime:a,saleId:m.personId()},success:function(e){if(m.loading("close"),"00"==e.error){m.dx.list=e.result;var t=[],a=[];if(null==r)for(var i=0;i<e.result.length;i++){0==(n=e.result[i]).mbyxkhs&&(n.mbyxkhs="0,0"),t.push(n.dhl),a.push(n.yxkhs),u==n.time&&(m.idchange3=i,m.dx.dhl=n.dhl||0,m.dx.mbdhl=n.mbdhl||0,m.dx.yxkhs=n.yxkhs||0,m.dx.mbyxkhs=n.mbyxkhs.split(",")[0]||0,"Infinity"==(d=Math.round(m.dx.dhl/m.dx.mbdhl*1e4)/100)?d=100:isNaN(d)&&(d=0),100<=d&&(d=100),p=d+"%","Infinity"==(h=Math.round(m.dx.yxkhs/m.dx.mbyxkhs*1e4)/100)?h=100:isNaN(h)&&(h=0),100<=h&&(h=100),c=h+"%")}else{for(i=0;i<e.result.length;i++){var n=e.result[i];t.push(n.dhl),a.push(n.yxkhs)}m.dx.dhl=e.result[m.idchange3].dhl||0,m.dx.mbdhl=e.result[m.idchange3].mbdhl||0,m.dx.yxkhs=e.result[m.idchange3].yxkhs||0,console.log(e.result,e.result[m.idchange3].mbyxkhs),0==e.result[m.idchange3].mbyxkhs?m.dx.mbyxkhs=0:m.dx.mbyxkhs=e.result[m.idchange3].mbyxkhs.split(",")[0],"Infinity"==(d=Math.round(m.dx.dhl/m.dx.mbdhl*1e4)/100)?d=100:isNaN(d)&&(d=0),100<=d&&(d=100),p=d+"%","Infinity"==(h=Math.round(m.dx.yxkhs/m.dx.mbyxkhs*1e4)/100)?h=100:isNaN(h)&&(h=0),100<=h&&(h=100),c=h+"%"}var o=Number(Math.max.apply(null,t));o+=.2*o;var s=Number(Math.max.apply(null,a));if(s+=s,"电销"!=m.power)return!1;var l=echarts.init(document.getElementById("dxOnly"));dxOnly.series[0].data=t,dxOnly.series[1].data=a,dxOnly.yAxis[0].max=Math.ceil(o),dxOnly.yAxis[1].max=Math.ceil(s),l.setOption(dxOnly),m.dxhx(d,p,h,c,y),l.off("click"),l.on("click",function(e){if(0==e.seriesIndex||1==e.seriesIndex){y=m.dx.list[e.dataIndex].time;var t=m.dx.list[e.dataIndex];m.dx.dhl=t.dhl||0,m.dx.mbdhl=t.mbdhl||0,m.dx.yxkhs=t.yxkhs||0,m.dx.mbyxkhs=t.mbyxkhs.split(",")[0]||0,"Infinity"==(d=Math.round(t.dhl/t.mbdhl*1e4)/100)?d=100:isNaN(d)&&(d=0),100<=d&&(d=100),p=d+"%","Infinity"==(h=Math.round(t.yxkhs/t.mbyxkhs.split(",")[0]*1e4)/100)?h=100:isNaN(h)&&(h=0),100<=h&&(h=100),c=h+"%",m.dxhx(d,p,h,c,y)}})}else layer.msg(e.msg)}}))},dxhx:function(e,t,a,i,n){var o,s,l=n.split("-"),r=l[0],d=l[1],p=new Date(r,d,0).getDate();o=n+"-01",s=n+"-"+p,this.dxl_time=o+","+s,pieChartOption.series[0].max="100",pieChartOption.series[0].data[0].value=e;var h=document.getElementById("pie"),c=echarts.init(h);c.setOption(pieChartOption),c.off("click"),c.on("click",function(e){var t="/static/page/index/saler_follow_list.html?startTime="+o+"&endTime="+s+"&type=1";layer.open({type:2,title:"电话量",content:t,area:["100%","100%"]})}),pieChartOption2.series[0].max="100",pieChartOption2.series[0].data[0].value=a;var m=document.getElementById("pie2"),u=echarts.init(m);u.setOption(pieChartOption2),u.off("click"),u.on("click",function(e){layer.open({type:2,title:"查看详情",content:"/static/page/index/saler_customer_list.html?startTime="+o+"&endTime="+s,area:["100%","100%"]})})},dx_location:function(e){if("1"==e){var t="/static/page/index/saler_follow_list.html?startTime="+this.dxl_time.split(",")[0]+"&endTime="+this.dxl_time.split(",")[1]+"&type=1";layer.open({type:2,title:"电话量",content:t,area:["100%","100%"]})}else layer.open({type:2,title:"查看详情",content:"/static/page/index/saler_customer_list.html?startTime="+this.dxl_time.split(",")[0]+"&endTime="+this.dxl_time.split(",")[1],area:["100%","100%"]})},getDataSwgw:function(){var p,h,c,m,u=this;if("商务顾问"!=u.power||"电销商务顾问"==u.role)return!1;$.ajax({type:"post",url:config.api_swgw,async:!0,data:{saleId:u.personId()},success:function(e){var t=e.result2;if(u.swgw.yjdk=t.yjdk||0,u.swgw.mbyjdk=t.mbyjdk||0,u.swgw.htsl=t.htsl||0,u.swgw.mbhtsl=t.mbhtsl||0,u.swgw.ddzje=t.ddzje||0,u.swgw.mbddzje=t.mbddzje||0,u.swgw.bfl=t.bfl||0,u.swgw.mbbfl=t.mbbfl||0,"Infinity"==(p=Math.round(t.yjdk/t.mbyjdk*1e4)/100)?p=100:isNaN(p)&&(p=0),100<=p&&(p=100),p+"%","Infinity"==(h=Math.round(t.htsl/t.mbhtsl*1e4)/100)?h=100:isNaN(h)&&(h=0),100<=h&&(h=100),h+"%","Infinity"==(c=Math.round(t.ddzje/t.mbddzje*1e4)/100)?c=100:isNaN(c)&&(c=0),100<=c&&(c=100),c+"%","Infinity"==(m=Math.round(t.bfl/t.mbbfl*1e4)/100)?m=100:isNaN(m)&&(m=0),100<=m&&(m=100),m+"%","商务顾问"!=u.power)return!1;pieChartOption_1.series[0].max="100",pieChartOption_1.series[0].data[0].value=p;var a=document.getElementById("swgw1"),i=echarts.init(a);i.setOption(pieChartOption_1),i.off("click"),i.on("click",function(e){layer.open({type:2,title:"商务顾问业绩目标完成情况",content:"/static/page/swPerson_self.html?index=3",area:["100%","100%"]})}),pieChartOption_2.series[0].max="100",pieChartOption_2.series[0].data[0].value=h;var n=document.getElementById("swgw2"),o=echarts.init(n);o.setOption(pieChartOption_2),o.off("click"),o.on("click",function(e){layer.open({type:2,title:"商务顾问业绩目标完成情况",content:"/static/page/swPerson_self.html?index=1",area:["100%","100%"]})}),pieChartOption_3.series[0].max="100",pieChartOption_3.series[0].data[0].value=c;var s=document.getElementById("swgw3"),l=echarts.init(s);l.setOption(pieChartOption_3),l.off("click"),l.on("click",function(e){layer.open({type:2,title:"商务顾问业绩目标完成情况",content:"/static/page/swPerson_self.html?index=2",area:["100%","100%"]})}),pieChartOption_4.series[0].max="100",pieChartOption_4.series[0].data[0].value=m;var r=document.getElementById("swgw4"),d=echarts.init(r);d.setOption(pieChartOption_4),d.off("click"),d.on("click",function(e){layer.open({type:2,title:"商务顾问业绩目标完成情况",content:"/static/page/swPerson_self.html?index=0",area:["100%","100%"]})})}})},swgwLocation:function(e){var t="/static/page/swPerson_self.html?index="+e;layer.open({type:2,title:"商务顾问业绩目标完成情况",content:t,area:["100%","100%"]})},getDataSwgw_dx:function(){var r,d,p,h=this;if("电销商务顾问"!=h.role)return!1;$.ajax({type:"post",url:config.api_dxswgw,async:!0,data:{saleId:h.personId()},success:function(e){var t=e.result2;if(h.dxswgw.bfl=t.bfl||0,h.dxswgw.mbbfl=t.mbbfl||0,h.dxswgw.khs=t.khs||0,h.dxswgw.mbkhs=t.mbkhs||0,h.dxswgw.ddje=t.ddje||0,h.dxswgw.mbddje=t.mbddje||0,"Infinity"==(r=Math.round(t.bfl/t.mbbfl*1e4)/100)?r=100:isNaN(r)&&(r=0),100<=r&&(r=100),r+"%","Infinity"==(d=Math.round(t.khs/t.mbkhs*1e4)/100)?d=100:isNaN(d)&&(d=0),100<=d&&(d=100),d+"%","Infinity"==(p=Math.round(t.ddje/t.mbddje*1e4)/100)?p=100:isNaN(p)&&(p=0),100<=p&&(p=100),p+"%","电销商务顾问"!=h.role)return!1;pieChartOption_dx1.series[0].max="100",pieChartOption_dx1.series[0].data[0].value=r;var a=document.getElementById("swgw1_dx"),i=echarts.init(a);i.setOption(pieChartOption_dx1),i.off("click"),i.on("click",function(e){layer.open({type:2,title:"电销商务顾问业绩目标完成情况",content:"/static/page/swPerson_selfdx.html?type=1",area:["100%","100%"]})}),pieChartOption_dx2.series[0].max="100",pieChartOption_dx2.series[0].data[0].value=d;var n=document.getElementById("swgw2_dx"),o=echarts.init(n);o.setOption(pieChartOption_dx2),o.off("click"),o.on("click",function(e){layer.open({type:2,title:"电销商务顾问业绩目标完成情况",content:"/static/page/swPerson_selfdx.html?type=2",area:["100%","100%"]})}),pieChartOption_dx3.series[0].max="100",pieChartOption_dx3.series[0].data[0].value=p;var s=document.getElementById("swgw3_dx"),l=echarts.init(s);l.setOption(pieChartOption_dx3),l.off("click"),l.on("click",function(e){layer.open({type:2,title:"电销商务顾问业绩目标完成情况",content:"/static/page/swPerson_selfdx.html?type=3",area:["100%","100%"]})})}})},dxLocation:function(e){var t=void 0;t="1"==e?"/static/page/swPerson_selfdx.html?type=1":"2"==e?"/static/page/swPerson_selfdx.html?type=2":"/static/page/swPerson_selfdx.html?type=3";layer.open({type:2,title:"电销商务顾问业绩目标完成情况",content:t,area:["100%","100%"]})},getYjmb:function(d,p,h){var e,t,s=this,a=(new Date).getFullYear(),c=s.nowMonth().split("-")[1];if((new Date).getFullYear()==a&&("01"==c||"02"==c||"03"==c)?a-=1:a=a,0==h)0==d?(e=a+"-04-01",t=a+"-06-30"):1==d?(e=a+"-07-01",t=a+"-09-30"):2==d?(e=a+"-10-01",t=a+"-12-31"):3==d&&(e=Number(a)+1+"-01-01",t=Number(a)+1+"-03-31");else if(1==h){var i=d.split("-"),n=i[0],o=i[1],l=new Date(n,o,0).getDate();e=d+"-01",t=d+"-"+l}if("经理"!=s.power)return!1;$.ajax({type:"post",url:config.api_Yjmb,async:!0,data:{startTime:e,endTime:t,type:p},success:function(r){if(s.loading("close"),"00"==r.error){for(var e=[],t=[],a=0;a<r.result.length;a++){var i=r.result[a];e.push(i.name),0==p||2==p?t.push(i.dkje.toFixed(2)):t.push(i.dkje)}var n=Number(Math.max.apply(null,t));if(n+=.2*n,"经理"!=s.power)return!1;var o=echarts.init(document.getElementById("main5"));option5.xAxis.data=e,option5.yAxis.max=Math.ceil(n),option5.series[0].data=t,o.setOption(option5),o.off("click"),o.on("click",function(e){var t,a=r.result[e.dataIndex].userId,i=r.result[e.dataIndex].name;if(0==h)t="01"==c||"02"==c||"03"==c?(new Date).getFullYear()-1:(new Date).getFullYear();else{var n=d.split("-"),o=n[0],s=n[1];t="01"==s||"02"==s||"03"==s?o-1:o}var l="/static/page/swPerson.html?time="+t+"&id="+a+"&saleName="+i+"&jidu="+d+"&type="+p+"&ch="+h;layer.open({type:2,title:"商务顾问业绩目标完成情况",content:l,area:["100%","100%"]})})}else layer.msg(r.msg)}})},getYjmb_dx:function(){var t=this;if(t.loading(),"经理"!=t.power)return!1;$.ajax({url:config.api_dxswgw,async:!0,data:{time:t.yjmbMonth_dx},success:function(e){if(t.loading("close"),"00"==e.error){if(t.c_dx=e.result,"经理"!=t.power)return!1;t.chart_init_dx(t.yjmbMonth_dx,t.c_dx,e)}else layer.msg(e.msg)}})},chart_init_dx:function(l,e,r){var d=this;this.main5_dx=echarts.init(document.getElementById("main5_dx")),option5_dx.xAxis[0].data=this.name_dx;var t,a,i=this.bfl_dx,n=this.ddzje_dx,o=this.khsl_dx;option5_dx.series[0].data=i,option5_dx.series[1].data=o,option5_dx.series[2].data=n,t=Number(Math.max.apply(null,i.concat(o))),t+=t,option5_dx.yAxis[0].max=Math.ceil(t),a=Number(Math.max.apply(null,n)),a+=.1*a,option5_dx.yAxis[1].max=Math.ceil(a),this.main5_dx.setOption(option5_dx),this.main5_dx.off("click"),this.main5_dx.on("click",function(e){console.log(e);var t=r.result[e.dataIndex].userId,a=r.result[e.dataIndex].name,i=d.yjmbMonth_dx.split("-"),n=i[0],o=i[1];swTime="01"==o||"02"==o||"03"==o?n-1:n;var s="/static/page/swPerson_dx.html?time="+swTime+"&id="+t+"&saleName="+a+"&jidu="+l+"&type="+e.seriesIndex;layer.open({type:2,title:"电销商务顾问业绩目标完成情况",content:s,area:["100%","100%"]})})},getCainian:function(e){var t,a,l=this;l.nowMonth().split("-")[1],(new Date).getFullYear();if(t=e+"-04-01",a=Number(e)+1+"-03-31","经理"!=l.power)return!1;$.ajax({type:"post",url:config.api_yzjb,async:!0,data:{startTime:t,endTime:a},success:function(n){if(l.loading("close"),"00"==n.error){l.c4=n.result;for(var e=[],t=[],a=0;a<n.result.length;a++){var i=n.result[a];e.push(i.NAME),t.push(i.je.toFixed(2))}var o=Number(Math.max.apply(null,t));if(o+=.2*o,"经理"!=l.power)return!1;var s=echarts.init(document.getElementById("main7"));option7.xAxis.data=e,option7.yAxis.max=Math.ceil(o),option7.series[0].data=t,s.setOption(option7),s.off("click"),s.on("click",function(e){var t=n.result[e.dataIndex].userId,a=n.result[e.dataIndex].NAME,i="/static/page/index/saler_yunzuo_list1.html?gxtime="+l.cainian+"&saleId="+t+"&saleName="+a;layer.open({type:2,title:"运作业绩目标完成情况",content:i,area:["100%","100%"]})})}else layer.msg(n.msg)}})},showMonthFirstDay:function(){var e=new Date;e.setMonth(e.getMonth()+1),e.setDate(0);var t=new Date(e).getDate(),a=(new Date).getFullYear().toString(),i=(new Date).getMonth()+1,n=a+"-"+(i=i<10?"0"+i:i)+"-01",o=a+"-"+i+"-"+t;this.startyear=n,this.endyear=o},showWen:function(){var t=this;$.get(config.api_zhou,{type:0,flag:1},function(e){t.sevens=e.result,t.month=t.sevens[0],t.getData(t.month,0,0)})},tab:function(e){1==e?this.taskList():2==e?this.shen():3==e?this.tx1():4==e&&this.tx2()},taskList:function(t){var a=this;t&&(this.task.pageNum=t),a.loading(),a.postDataTask.pageSize=this.task.pageSize,a.postDataTask.pageNo=this.task.pageNum,require(["pagination"],function(e){$.ajax({url:config.api_task,async:!0,data:a.postDataTask}).done(function(e){a.task=e.result,a.pagi?($(".pagi").pagination("updatePages",a.task.pages),1==t&&$(".pagi").pagination("goToPage",a.task.pageNum)):(a.pagi=1,$(".pagi").pagination({pages:a.task.pages,showCtrl:!0,displayPage:6,currentPage:a.task.pageNum,onSelect:function(e){a.task.pageNum=e,a.taskList()}})),a.loading("close")})})},shen:function(t){var a=this;t&&(this.shenhe.pageNum=t),a.loading(),a.postDataShenhe.pageSize=this.shenhe.pageSize,a.postDataShenhe.pageNo=this.shenhe.pageNum,require(["pagination"],function(e){$.ajax({url:config.api_shenhe,async:!0,data:a.postDataShenhe}).done(function(e){a.shenhe=e.result,a.pagi1?($(".pagi1").pagination("updatePages",a.shenhe.pages),1==t&&$(".pagi1").pagination("goToPage",a.shenhe.pageNum)):(a.pagi1=1,$(".pagi1").pagination({pages:a.shenhe.pages,showCtrl:!0,displayPage:6,currentPage:a.shenhe.pageNum,onSelect:function(e){a.shenhe.pageNum=e,a.shen()}})),a.loading("close")})})},tx1:function(t){var a=this;t&&(this.mytx.pageNum=t),a.loading(),a.postDataMytx.pageSize=this.mytx.pageSize,a.postDataMytx.pageNo=this.mytx.pageNum,require(["pagination"],function(e){$.ajax({url:config.api_wdtx,async:!0,data:a.postDataMytx}).done(function(e){a.mytx=e.result,a.pagi2?($(".pagi2").pagination("updatePages",a.mytx.pages),1==t&&$(".pagi2").pagination("goToPage",a.mytx.pageNum)):(a.pagi2=1,$(".pagi2").pagination({pages:a.mytx.pages,showCtrl:!0,displayPage:6,currentPage:a.mytx.pageNum,onSelect:function(e){a.mytx.pageNum=e,a.tx1()}})),a.loading("close")})})},tx2:function(t){var a=this;t&&(this.gqtx.pageNum=t),a.loading(),a.postDataGqtx.pageSize=this.gqtx.pageSize,a.postDataGqtx.pageNo=this.gqtx.pageNum,require(["pagination"],function(e){$.ajax({url:config.api_gqtx,async:!0,data:a.postDataGqtx}).done(function(e){a.gqtx=e.result,a.pagi3?($(".pagi3").pagination("updatePages",a.gqtx.pages),1==t&&$(".pagi3").pagination("goToPage",a.gqtx.pageNum)):(a.pagi3=1,$(".pagi3").pagination({pages:a.gqtx.pages,showCtrl:!0,displayPage:6,currentPage:a.gqtx.pageNum,onSelect:function(e){a.gqtx.pageNum=e,a.tx2()}})),a.loading("close")})})},customer_case_view:function(e,t,a){var i,n,o,s=this.year;0==t?(i=s+"-04-01",n=Number(s)+1+"-03-31"):(i=this.startyear,n=this.endyear),o=a?"/static/page/index/saler_turnover_list.html?startTime="+i+"&endTime="+n+"&flag="+e+"&divide=1&marker="+a:"/static/page/index/saler_turnover_list.html?startTime="+i+"&endTime="+n+"&flag="+e+"&divide=1";layer.open({type:2,title:"查看详情",content:o,area:["100%","100%"]})},order_customer_view:function(){layer.open({type:2,title:"查看详情",content:"/static/page/index/saler_customer_list.html?startTime="+this.startyear+"&endTime="+this.endyear+"&role="+this.role,area:["100%","100%"]})},viewTask:function(e,t,a,i,n){if("待发快递"==i)layer.open({type:2,title:"查看详情",content:"/express/goEdit.do?id="+n+"&mark1=1",area:["100%","100%"]});else layer.open({type:2,title:"查看详情",content:"/workBench/views.do?id="+e+"&fqr="+t+"&dfbgId="+a,area:["100%","100%"]})},sh:function(e,t,a){var i="/vistsh/goEdit.do?id=";switch(e){case"外访":break;case"诉讼/仲裁":i="/lawsuitaudit/goEdit.do?id=";break;case"案件报告":i="/workBench/views1.do?id="}layer.open({type:2,title:"查看详情",content:i+t+"&debtorId="+a+"&sy_workwench=1",area:["100%","100%"]})},setSuccess:function(e,t){var a=this,i=layer.confirm("确认完成?",function(){$.post("/order/updateCallInfo",{id:e}).done(function(e){"00"==e.error?(1==t?a.tx1():2==t&&a.tx2(),layer.close(i)):(layer.close(i),layer.msg(e.msg))})})},assis_view:function(e,t){layer.open({type:2,title:t,content:"/static/page/index/saler_assistant.html?flag="+e,area:["100%","100%"]})},nowMonth:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1;return a=a<10?"0"+a:a,t.toString()+"-"+a.toString()},FiscalYear:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1;return"01"==a||"02"==a||"03"==a?Number(t)-1:t},showWindow:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();a<10&&(a="0"+a),i<10&&(i="0"+i);var n=t+"-"+a+"-01",o=t+"-"+a+"-"+i,s=localStorage.getItem("userInfo"),l=(s=$.parseJSON(s)).list[0].ROLE_ID,r=s.list[0].USER_ID;20<parseInt(i)?(console.log("今天是"+i+"号"),$.ajax({type:"post",url:config.api_showWindow,async:!0,data:{startTime:n,endTime:o,roleId:l,saleId:r},success:function(e){"达标"==e.msg?($(".htz_success").show(),$(".htz-modal").show()):"未达标"==e.msg&&($(".htz_defult").show(),$(".htz-modal").show())}})):console.log("今天是"+i+"号")},htzClose:function(){$(".htz_success").hide(),$(".htz-modal").hide(),$(".htz_defult").hide()},remind:function(){var i=this,e=$("#remind_box");e.find("[name=remark]").val(""),e.find("[name=time]").val("");var n=layer.open({type:1,title:"新增提醒",closeBtn:1,content:$("#remind_box"),area:["600px","300px"],btn:"保存",btnAlign:"c",success:function(){},yes:function(){var e=$("#remind_box"),t=e.find("[name=remark]").val(),a=e.find("[name=time]").val();return(new Date).getTime()>new Date(a).getTime()?(layer.msg("不能小于当前时间"),!1):""==t?(layer.msg("提醒内容不能为空"),!1):""==a?(layer.msg("提醒时间不能为空"),!1):void $.post("/order/saveCallInfo",{remark:t,time:a}).done(function(e){layer.close(n),i.tx1()})}})},personId:function(){var e=localStorage.getItem("userInfo");return(e=$.parseJSON(e)).list[0].USER_ID},getDatayz:function(e){var t,a,r,d,p=this;p.nowMonth().split("-")[1],(new Date).getFullYear();if(t=e+"-04-01",a=Number(e)+1+"-03-31",p.yzl_time=t+","+a,p.yzl_id=p.personId(),"公司内部运作"!=p.role)return!1;$.ajax({type:"post",url:config.api_yz,async:!0,data:{startTime:t,endTime:a,runnerId:p.personId()},success:function(s){if(p.loading("close"),"00"==s.error){for(var e=[],t=[],a=0,i=0;i<s.result.length;i++){var n=s.result[i];a+=Number(s.result[i].dkje),Number(s.result[i].mbdkje),e.push(n.time),t.push(n.dkje)}p.yz.dkje=a,p.yz.mbdkje=s.zb,"Infinity"==(r=Math.round(a/s.zb*1e4)/100)?r=100:isNaN(r)&&(r=0),100<=r&&(r=100),d=r+"%",p.yzdx(r,d);var o=Number(Math.max.apply(null,t));o+=.2*o;var l=echarts.init(document.getElementById("yzOnly"));yzoption.xAxis.data=e,yzoption.yAxis.max=Math.ceil(o),yzoption.series[0].data=t,l.setOption(yzoption),l.off("click"),l.on("click",function(e){var t=s.result[e.dataIndex].time,a=t.split("-"),i=a[0],n=a[1],o="/static/page/index/saler_yunzuo_list2.html?startTime="+(t+"-01")+"&endTime="+(t+"-"+new Date(i,n,0).getDate())+"&runnerId="+p.personId();layer.open({type:2,title:"运作到款金额明细",content:o,area:["100%","100%"]})})}else layer.msg(s.msg)}})},yz_location:function(){var e="/static/page/index/saler_yunzuo_list2.html?startTime="+this.yzl_time.split(",")[0]+"&endTime="+this.yzl_time.split(",")[1]+"&runnerId="+this.yzl_id;layer.open({type:2,title:"运作到款金额明细",content:e,area:["100%","100%"]})},yzdx:function(e,t){var i=this;pieChartOption_yz.series[0].max="100",pieChartOption_yz.series[0].data[0].value=e;var n,a=i.nowMonth().split("-")[1],o=(new Date).getFullYear();n=o==i.yzmonth&&("01"==a||"02"==a||"03"==a)?Number(i.yzmonth)-1:i.yzmonth;var s=document.getElementById("pie_yz"),l=echarts.init(s);l.setOption(pieChartOption_yz),l.off("click"),l.on("click",function(e){var t=Number(n)+1,a="/static/page/index/saler_yunzuo_list2.html?startTime="+n+"-04-01&endTime="+t+"-03-31&runnerId="+i.personId();layer.open({type:2,title:"运作到款金额明细",content:a,area:["100%","100%"]})})},reDetail:function(e){var t;t=0==e.remark.substr(e.remark.length-1,1)?"/static/page/customer_detail.html?id="+e.customerId:"/static/page/customerN_detail.html?id="+e.customerId;layer.open({type:2,title:"客户详情",content:t,area:["100%","100%"]})},getNum:function(){var t=this;$.ajax({type:"post",url:config.api_num,async:!0,data:{flag:0},success:function(e){t.tNum1=e.result.total}}),$.ajax({type:"post",url:config.api_num,async:!0,data:{flag:1},success:function(e){t.tNum2=e.result.total}}),$.ajax({type:"post",url:config.api_num,async:!0,data:{flag:2},success:function(e){t.tNum3=e.result.total}})}}})}),window.parentFnc=function(e){layer.closeAll(),window.app.getCaseRecord(window.app.type)};