"use strict";function _defineProperty(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var config={id:yo.getQueryString("id"),type:yo.getQueryString("type"),index:yo.getQueryString("index"),role:localStorage.userRole,api_detail:"/yjzb/showYjzbDetail",api_add:"/yjzb/addOrUpdateYjzb",api_add1:"/yjzb/add"};function colseThis(){var e=parent.layer.getFrameIndex(window.name);parent.layer.close(e)}require(["dateTimeInit"]),require(["select2"],function(e){window.app=new Vue({el:"#app",data:_defineProperty({c:{},d:[],dtype:"",xinxi:!1,xinxi_1:!0,xinxi_2:!1,btn_edit:!1,qiehuan:!0,qiehuan1:!1,qiehuan2:!1,qiehuan3:!1,y7:!0,a:"",b:""},"c",""),computed:{},created:function(){},mounted:function(){this.list_Get()},methods:{list_Get:function(){var n=this;2==config.type?(n.qiehuan=!1,n.qiehuan1=!0,n.qiehuan2=!1,n.y7=!0):6==config.type?(n.qiehuan=!1,n.qiehuan1=!1,n.qiehuan2=!0,n.y7=!0):7==config.type&&(n.qiehuan=!1,n.qiehuan1=!1,n.qiehuan2=!1,n.qiehuan3=!0,n.y7=!1),1==config.type&&(n.xinxi=!1,n.xinxi_1=!1,n.xinxi_2=!0),$.get(config.api_detail,{parentId:config.id,type:config.type},function(e){if("00"==e.error)if(n.btn_edit=!0,7==config.type)null==e.result[0].zbA&&(e.result[0].zbA=0),null==e.result[0].zbB&&(e.result[0].zbB=0),null==e.result[0].bfzb&&(e.result[0].bfzb=0),n.d=e.result,n.a=e.result[0].zbA,n.b=e.result[0].zbB,n.c=e.result[0].bfzb,n.xinxi=!0,n.xinxi_1=!1,n.xinxi_2=!1;else{n.c=e.result;for(var i=e.result,t=0;t<i.length;t++)1<i[t].xinxi.length&&(n.xinxi=!0,n.xinxi_1=!1,n.xinxi_2=!1)}})},save:function(){var e=this,a=[];if($("#htz_zb tr").each(function(){var n=$(this).attr("data-id");console.log(n),$(this).find("td input").each(function(){var e={},i=$(this).attr("data-month"),t=$(this).val();e.userId=n,e.monthOrjd=i,e.targetDetail=t,a.push(e)})}),console.log(a),1==config.type)for(var i=0;i<a.length;i++)if(2!=a[i].targetDetail.split(",").length)return layer.msg("格式不正确，请检查后保存"),!1;7==config.type?$.get(config.api_add1,{parentId:config.id,zbA:e.a,zbB:e.b,bfzb:e.c},function(e){"00"==e.error&&layer.msg("保存成功")}):yocto.json(config.api_add,{type:config.type,parentId:config.id,yjList:a},function(e){"00"==e.error&&layer.msg("保存成功")})},cancel:function(){colseThis()}}})}),window.parentFnc=function(e){layer.closeAll(),window.app.getCaseRecord(window.app.type)};