"use strict";var config={mode:yo.getQueryString("mode"),role:localStorage.userRole,reportId:yo.getQueryString("id"),api_getMonthData:"/order/getMonthData.do",api_saveMonthData:"/order/saveMonthData"};window.app=new Vue({el:"#app",data:{c:{jdjdmb:"",sjwc:"",jhrate:"",sjrate:"",gbs:"",yjja:""},year:(new Date).getFullYear(),month:(new Date).getMonth()+1,userName:JSON.parse(localStorage.userInfo).list[0].NAME,thisMonth_hkje:0,thisMonth_yjsr:0,nextMonth_hkje:0,nextMonth_yjsr:0,thisMonth:[],nextMonth:[]},created:function(){var y=this;y.loading(),$.ajax({url:config.api_getMonthData,async:!1,data:{id:config.reportId},success:function(t){y.c=$.extend({},y.c,t.result),t.result.userName&&(y.userName=t.result.userName),document.getElementById("app").classList.remove("hide"),y.loading("close");var e=[],n=y.c.rq.split("@bzf@"),r=y.c.zqr.split("@bzf@"),o=y.c.zwr.split("@bzf@"),s=y.c.hkje.split("@bzf@"),a=y.c.yjsr.split("@bzf@"),i=y.c.jhnwzd.split("@bzf@"),h=0;for(n.length=1==(1==n.length&&""!=n[0])?n.length:n.length-1,h=0;h<n.length;h++)e[h]={},e[h].rq=n[h],e[h].zqr=r[h],e[h].zwr=o[h],e[h].hkje=s[h],e[h].yjsr=a[h],e[h].jhnwzd=i[h],y.thisMonth_hkje+=Number(s[h]),y.thisMonth_yjsr+=Number(a[h]);e[0].rq&&(y.thisMonth=e);var l=[],c=y.c.yjrq.split("@bzf@"),d=y.c.yjzqr.split("@bzf@"),p=y.c.yjzwr.split("@bzf@"),f=y.c.yjhkje.split("@bzf@"),j=y.c.yjyjsr.split("@bzf@"),g=[];for(y.c.yjndfx&&y.c.yjndfx[0]&&(g=y.c.yjndfx.split("@bzf@")),c.length=1==c.length&&""!=yjrp[0]?c.length:c.length-1,h=h=0;h<c.length;h++)l[h]={},l[h].rq=c[h],l[h].zqr=d[h],l[h].zwr=p[h],l[h].hkje=f[h],l[h].yjsr=j[h],l[h].ndfx=g[h],y.nextMonth_hkje+=Number(f[h]),y.nextMonth_yjsr+=Number(j[h]);l[0].rq&&(y.nextMonth=l)}}),config.mode&&$("#app").find("input,textarea").prop("readonly",!0)},methods:{loading:function(t){"close"==t?layer.close(this.loadingSwitch):this.loadingSwitch=layer.load(3)},save:function(t){this.c.yjndfx=[];for(var e=0;e<this.nextMonth.length;e++)this.c.yjndfx.push(this.nextMonth[e].ndfx);this.c.yjndfx=this.c.yjndfx.join("@bzf@"),this.c.status=t,this.c.title=document.getElementById("title").innerHTML,$.post(config.api_saveMonthData,this.c,function(t){(t.error="00")?(parent&&parent.layer.closeAll(),parent&&parent.location.reload()):layer.msg(t.msg)})},edit:function(t){this.c.id=config.reportId,this.save(t)}}}),window.parentFnc=function(t){layer.closeAll(),window.app.getCaseRecord(window.app.type)};