"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define(["require","yoValidate"],function(t){return Vue.component("pay-plan",{template:'\n  <div class="ibox-content" id="dialog_payplan">\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-xs-12">\n\t\t\t\t\t<div class="tabbable">\n\t\t\t\t\t\t<div class="tab-content">\n\t\t\t\t\t\t\t<div class="tab-pane in active">\n\t\t\t\t\t\t\t\t<form action="" name="customerForm" id="dialog_payplan_form" method="post" class="form form-horizontal">\n\t\t\t\t\t\t\t\t\t<div class="row m-t-sm">\n\t\t\t\t\t\t\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label class="col-sm-2 control-label">类型&nbsp;<font color="red">*</font>:\n\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-sm-10">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<select class="form-control" v-model="type" name="type" id="">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value="0">按月分期</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value="1">约定分期</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div v-show="type==0">\n\t\t\t\t\t\t\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label class="col-sm-2 control-label">计划开始回款时间&nbsp;<font color="red">*</font>:\n\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-sm-10">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input v-model="planTime" id="dialog_planTime" readonly   class="span10 date-picker form-control" type="text" data-validate="require"  data-date-format="yyyy-mm-dd" placeholder="这里输入计划开始回款时间" value="">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label class="col-sm-2 control-label">单次回款金额(元)&nbsp;<font color="red">*</font>:\n\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-sm-10">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input v-model="onceMoney" class="form-control" data-validate="require|price|maxLength=50" type="text"  placeholder="这里输入单次回款金额" value="">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label class="col-sm-2 control-label">回款期数&nbsp;<font color="red">*</font>:\n\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-sm-10">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input v-model="periods" class="form-control" data-validate="require|integer|maxLength=50" type="text" placeholder="这里输入回款期数" value="">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="col-sm-12" v-show="type==1">\n\t\t\t\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label class="col-sm-2 control-label">分期计划&nbsp;<font color="red">*</font>:\n\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-sm-10">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class="btn btn-primary btn-xs m-t-xs" id="addNewPlan" @click.prevent="payList.push({time:\'\',money:\'\'})">新增一条</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<table class="table table-bordered form form-inline" >\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t            <thead>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t            <tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t            <th>时间</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th>金额</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t<th>操作</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t            </thead>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <tr v-for="(el,index) of payList">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t        <td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input class="form-control test8" readonly data-validate="require" type="text" :id="\'payList_date_\'+index" @click="laydate($event,el)" v-model="el.time"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td><input class="form-control" type="number" data-validate="require | number":id="\'payList_moeny_\'+index" onclick="" v-model="el.money"/></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <td><button class="btn btn-white btn-xs" @click.prevent="payList.splice(index,1)">删除</button></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label class="control-label col-sm-2 no-padding-right">备注:</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-sm-10">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea v-model="remark" class="form-control" style="height: 120px;" rows="15" cols="10" placeholder="这里输入备注"></textarea>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n  ',props:["orderId"],data:function(){return{type:0,planTime:"",onceMoney:"",periods:"",remark:"",payList:[{time:"",money:""}]}},computed:{time:function(){for(var t=[],n=0;n<this.payList.length;n++)t.push(this.payList[n].time);return t.join(",")},money:function(){for(var t=[],n=0;n<this.payList.length;n++)t.push(this.payList[n].money);return t.join(",")}},mounted:function(){var e=this;this.planTime=e.getNowFormatDate(),laydate.render({elem:"#dialog_planTime",trigger:"click",done:function(t,n){e.planTime=t}})},methods:{init:function(){var t=this,n=layer.open({type:1,title:"案件回款计划",content:$("#dialog_payplan"),area:["800px","600px"],btn:["保存"],btnAlign:"c",yes:function(){t.save(function(){layer.close(n),t.$emit("refresh")})},end:function(){t.type=0,t.planTime=t.getNowFormatDate(),t.onceMoney="",t.periods="",t.remark="",t.payList=[]}})},save:function(n){if(yoValidate("#dialog_payplan_form",1)){var t={types:this.type,remark:this.remark,orderId:this.orderId};if(this.type){if(!this.payList.length)return void layer.yoTips("请新增分期计划","#addNewPlan");t.time=this.time,t.money=this.money}else t.planTime=this.planTime,t.onceMoney=this.onceMoney,t.periods=this.periods;$.post("/workBench/savePaymentPlan",t).done(function(t){n&&n()})}},laydate:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t,e){lay(".test8").each(function(){laydate.render({elem:this,trigger:"click",done:function(t,n){"object"==(void 0===e?"undefined":_typeof(e))&&(e.time=t)}})}),console.log("1111")}),getNowFormatDate:function(){var t=new Date,n=t.getMonth()+1,e=t.getDate(),o=t.getHours(),l=t.getMinutes(),a=t.getSeconds();return 1<=n&&n<=9&&(n="0"+n),0<=e&&e<=9&&(e="0"+e),0<=o&&o<=9&&(o="0"+o),0<=l&&l<=9&&(l="0"+l),0<=a&&a<=9&&(a="0"+a),t.getFullYear()+"-"+n+"-"+e}}})});